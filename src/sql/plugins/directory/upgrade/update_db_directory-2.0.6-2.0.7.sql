--
-- Dumping data in table directory_entry_parameter
--
INSERT INTO directory_entry_parameter (parameter_key, parameter_value) VALUES ('indexed_as_title', '0');
INSERT INTO directory_entry_parameter (parameter_key, parameter_value) VALUES ('indexed_as_summary', '0');
INSERT INTO directory_entry_parameter (parameter_key, parameter_value) VALUES ('shown_in_completeness', '1');


--
-- Add column in table directory_entry
--
ALTER TABLE directory_entry ADD COLUMN is_indexed_as_summary SMALLINT DEFAULT 0 AFTER is_indexed;
ALTER TABLE directory_entry ADD COLUMN is_indexed_as_title SMALLINT DEFAULT 0 AFTER is_indexed;
ALTER TABLE directory_entry ADD COLUMN is_shown_in_completeness SMALLINT DEFAULT 0;

--
-- Add new lines for table directory_field for the EntryTypeMyLutece
--

-- First, the primary key is set to AUTO_INCREMENT, so that new records will automatically set a new id_field
ALTER TABLE directory_field CHANGE id_field id_field INT NOT NULL AUTO_INCREMENT;
-- Insert new lines by fetching the id_entry of the EntryTypeMyLutece (19 is the id_type of EntryTypeMyLutece) 
INSERT INTO directory_field (id_entry) SELECT id_entry FROM directory_entry WHERE id_type = 19;
-- Revert the attribute of the primary_key id_field
ALTER TABLE directory_field CHANGE id_field id_field INT DEFAULT 0 NOT NULL;

--
-- Add new entry type EntryTypeDownloadUrl
--
INSERT INTO directory_entry_type(id_type,title_key,is_group,is_comment,is_mylutece_user,class_name) VALUES (20,'directory.entry_type_download_url.title',FALSE,FALSE,FALSE,'fr.paris.lutece.plugins.directory.business.EntryTypeDownloadUrl');

UPDATE directory_physical_file SET file_value = 0x3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C78736C3A7374796C6573686565742076657273696F6E3D22312E302220786D6C6E733A78736C3D22687474703A2F2F7777772E77332E6F72672F313939392F58534C2F5472616E73666F726D223E0D0A093C78736C3A6F7574707574206D6574686F643D2274657874222F3E0D0A0D0A093C78736C3A74656D706C617465206D617463683D226469726563746F7279223E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226C6973742D656E7472792F656E747279222F3E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226C6973742D656E7472792F737461747573222F3E0D0A09093C78736C3A696620746573743D22636F756E74282F2F7061727469616C6578706F7274293D3022203E0D0A0909093C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A09093C2F78736C3A69663E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226C6973742D7265636F72642F7265636F7264222F3E0D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D227265636F7264223E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D226C6973742D656E7472792F656E7472792F6C6973742D7265636F72642D6669656C64222F3E0D0A09093C78736C3A696620746573743D22737461747573203D20747275652829223E0D0A0909093C78736C3A746578743E3B223C2F78736C3A746578743E0D0A0909093C78736C3A76616C75652D6F662064697361626C652D6F75747075742D6573636170696E673D22796573222073656C6563743D22737461747573222F3E0D0A0909093C78736C3A746578743E223C2F78736C3A746578743E0D0A09093C2F78736C3A69663E0D0A09093C78736C3A696620746573743D22636F756E74282F2F7061727469616C6578706F7274293D3022203E0D0A0909093C78736C3A746578743E262331303B3C2F78736C3A746578743E0D0A09093C2F78736C3A69663E0D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D226C6973742D7265636F72642D6669656C64223E0D0A09093C78736C3A746578743E223C2F78736C3A746578743E0D0A09093C78736C3A6170706C792D74656D706C617465732073656C6563743D227265636F72642D6669656C64222F3E0D0A09093C78736C3A746578743E223C2F78736C3A746578743E0D0A09093C78736C3A696620746573743D22706F736974696F6E2829213D6C6173742829223E0D0A0909093C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09093C2F78736C3A69663E0D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D22656E747279223E0D0A09093C78736C3A63686F6F73653E0D0A0909093C78736C3A7768656E20746573743D224073686F777879203D20277472756527223E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E0D0A090909093C78736C3A76616C75652D6F662073656C6563743D227469746C65222F3E0D0A090909093C78736C3A746578743E5F58223C2F78736C3A746578743E0D0A090909093C78736C3A746578743E3B223C2F78736C3A746578743E0D0A090909093C78736C3A76616C75652D6F662073656C6563743D227469746C65222F3E0D0A090909093C78736C3A746578743E5F59223C2F78736C3A746578743E0D0A0909093C2F78736C3A7768656E3E0D0A0909093C78736C3A6F74686572776973653E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E0D0A090909093C78736C3A76616C75652D6F662073656C6563743D227469746C65222F3E0D0A090909093C78736C3A746578743E223C2F78736C3A746578743E0D0A0909093C2F78736C3A6F74686572776973653E0D0A09093C2F78736C3A63686F6F73653E0D0A09093C78736C3A696620746573743D22706F736974696F6E2829213D6C6173742829223E0D0A0909093C78736C3A746578743E3B3C2F78736C3A746578743E0D0A09093C2F78736C3A69663E0D0A093C2F78736C3A74656D706C6174653E0D0A0D0A093C78736C3A74656D706C617465206D617463683D22737461747573223E0D0A09093C78736C3A696620746573743D2240646973706C61793D2779657327223E0D0A2020202020202020202020203C78736C3A746578743E3B22737461747573223B3C2F78736C3A746578743E0D0A09093C2F78736C3A69663E0D0A093C2F78736C3A74656D706C6174653E0D0A090D0A093C78736C3A74656D706C617465206D617463683D227265636F72642D6669656C64223E0D0A09093C78736C3A63686F6F73653E0D0A0909093C78736C3A7768656E20746573743D222E2E2F4067656F6C6F636174696F6E203D20277472756527223E0D0A090909093C78736C3A63686F6F73653E0D0A09090909093C78736C3A7768656E20746573743D222E2E2F2E2E2F4073686F777879203D20277472756527223E0D0A0909090909093C78736C3A696620746573743D22407469746C65203D20275827223E0D0A090909090909093C78736C3A76616C75652D6F662064697361626C652D6F75747075742D6573636170696E673D22796573222073656C6563743D227265636F72642D6669656C642D76616C7565222F3E0D0A090909090909093C78736C3A746578743E223B223C2F78736C3A746578743E0D0A0909090909093C2F78736C3A69663E0D0A0909090909093C78736C3A696620746573743D22407469746C65203D20275927223E0D0A090909090909093C78736C3A76616C75652D6F662064697361626C652D6F75747075742D6573636170696E673D22796573222073656C6563743D227265636F72642D6669656C642D76616C7565222F3E0D0A0909090909093C2F78736C3A69663E0D0A09090909093C2F78736C3A7768656E3E0D0A09090909093C78736C3A6F74686572776973653E0D0A0909090909093C78736C3A696620746573743D22407469746C65203D20276164647265737327223E0D0A090909090909093C78736C3A76616C75652D6F662064697361626C652D6F75747075742D6573636170696E673D22796573222073656C6563743D227265636F72642D6669656C642D76616C7565222F3E0D0A0909090909093C2F78736C3A69663E0D0A09090909093C2F78736C3A6F74686572776973653E0D0A090909093C2F78736C3A63686F6F73653E0D0A0909093C2F78736C3A7768656E3E0D0A0909093C78736C3A6F74686572776973653E0D0A090909093C78736C3A76616C75652D6F662064697361626C652D6F75747075742D6573636170696E673D22796573222073656C6563743D227265636F72642D6669656C642D76616C7565222F3E0D0A090909093C78736C3A696620746573743D22706F736974696F6E2829213D6C6173742829223E0D0A09090909093C78736C3A746578743E2C3C2F78736C3A746578743E0D0A090909093C2F78736C3A69663E0D0A0909093C2F78736C3A6F74686572776973653E0D0A09093C2F78736C3A63686F6F73653E0D0A093C2F78736C3A74656D706C6174653E0D0A090D0A3C2F78736C3A7374796C6573686565743E0D0A WHERE id_physical_file = 2;
