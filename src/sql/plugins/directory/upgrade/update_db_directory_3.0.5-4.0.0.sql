INSERT INTO directory_entry_type(id_type,title_key,is_group,is_comment,is_mylutece_user,class_name) 
values
(22,'directory.entry_type_array.title',FALSE,FALSE,FALSE,'fr.paris.lutece.plugins.directory.business.EntryTypeArray');

ALTER TABLE directory_entry ADD COLUMN num_row SMALLINT DEFAULT 0;
ALTER TABLE directory_entry ADD COLUMN num_column SMALLINT DEFAULT 0;

DELETE FROM directory_physical_file where id_physical_file = 4;
INSERT INTO directory_physical_file (id_physical_file, file_value) VALUES (4,'<?xml version=\"1.0\"?>\r\n<xsl:stylesheet version=\"1.0\"\r\n	xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">\r\n	\r\n	<xsl:param name=\"title-descriptive\" />\r\n	<xsl:param name=\"title-sort-asc\" />\r\n	<xsl:param name=\"title-sort-desc\" />\r\n	\r\n	<xsl:output method=\"html\" indent=\"yes\" />\r\n\r\n	<xsl:template match=\"directory\">\r\n	\r\n		<table class=\"table table-striped\" name=\"results_list\" id=\"results_list\">\r\n			<tr>\r\n				<th>&#160;</th>\r\n				<xsl:apply-templates select=\"list-entry/entry\" />\r\n				<xsl:apply-templates select=\"list-entry/status\" />\r\n			</tr>\r\n			\r\n			<xsl:apply-templates select=\"list-record/record\"/>\r\n		</table>\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"record\">\r\n		<tr>\r\n			<td class=\"link-directory-record\">\r\n				<a class=\"btn btn-primary btn-small\" href=\"jsp/site/Portal.jsp?page=directory&amp;id_directory_record={@id}&amp;view_directory_record=1\" title=\"{$title-descriptive}\">\r\n					<i class=\"icon-eye-open icon-white\"> </i> <span class="glyphicon glyphicon-search"></span>\r\n				</a>\r\n			</td>\r\n			<xsl:apply-templates select=\"list-entry/entry/list-record-field\" />\r\n			<td><xsl:value-of disable-output-escaping=\"yes\"	select=\"status\" /></td>\r\n		</tr>\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"list-record-field\">\r\n		<xsl:choose>\r\n			<xsl:when test=\"position()=1\">\r\n				<td class=\"first-record-field\">\r\n					<xsl:choose>\r\n						<xsl:when test=\"@geolocation = \'true\'\">\r\n							<xsl:call-template name=\"field-geolocalisation\" />\r\n						</xsl:when>\r\n						<xsl:otherwise>\r\n							<xsl:apply-templates select=\"record-field\" />\r\n						</xsl:otherwise>\r\n					</xsl:choose>\r\n				</td>\r\n			</xsl:when>\r\n			<xsl:otherwise>  \r\n				<td>\r\n					<xsl:choose>\r\n						<xsl:when test=\"@geolocation = \'true\'\">\r\n							<xsl:call-template name=\"field-geolocalisation\" />\r\n						</xsl:when>\r\n						<xsl:otherwise>\r\n							<xsl:apply-templates select=\"record-field\" />\r\n						</xsl:otherwise>\r\n					</xsl:choose>\r\n				</td>\r\n			</xsl:otherwise>\r\n		</xsl:choose>\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"entry\">\r\n		<xsl:variable name=\"id-directory\" select=\"../../@id\" />\r\n		<th>\r\n			<xsl:if test=\"@is-sortable = \'true\'\">\r\n				<a class=\"sort\" id=\"sort\" href=\"jsp/site/Portal.jsp?page=directory&amp;id_directory={$id-directory}&amp;sorted_attribute_name={@id}&amp;asc_sort=true#sort\" title=\"{$title-sort-asc}\" >\r\n					<i class=\"icon-chevron-up\"> </i>\r\n				</a>\r\n				<a class=\"sort\" href=\"jsp/site/Portal.jsp?page=directory&amp;id_directory={$id-directory}&amp;sorted_attribute_name={@id}&amp;asc_sort=false#sort\" title=\"{$title-sort-desc}\" >\r\n	    			<i class=\"icon-chevron-down\"> </i>\r\n	    		</a>\r\n	    	 </xsl:if>\r\n	    	 <span><xsl:value-of select=\"title\" /></span>\r\n		</th>\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"record-field\">	\r\n	\r\n		<xsl:variable name=\"type-recordfield\" select=\"@type-entry\" />\r\n		<xsl:variable name=\"show\" select=\"@isShownInList\" />\r\n		<xsl:choose>\r\n			<xsl:when test=\"$type-recordfield=\'10\'\">\r\n				<xsl:text>&#160;</xsl:text>\r\n			</xsl:when>\r\n			<xsl:when test=\"not(string(record-field-value)=\'\')\">					\r\n					<xsl:value-of disable-output-escaping=\"yes\"\r\n						select=\"record-field-value\" />\r\n			</xsl:when>		\r\n			<xsl:otherwise>\r\n				<xsl:text>&#160;</xsl:text>\r\n			</xsl:otherwise>\r\n		</xsl:choose>		\r\n		<xsl:choose>\r\n			<xsl:when test=\"$type-recordfield=\'10\' and $show=\'false\'\">				\r\n				<xsl:text>&#160;</xsl:text>\r\n			</xsl:when>\r\n			<xsl:otherwise>				\r\n				<xsl:apply-templates select=\"file\" />\r\n			</xsl:otherwise>\r\n		</xsl:choose>		\r\n		<br />\r\n	</xsl:template>\r\n\r\n	<xsl:template match=\"file\">\r\n		<xsl:variable name=\"id\" select=\"@id\" />\r\n		<xsl:variable name=\"type\" select=\"@type-entry\" />\r\n		<xsl:variable name=\"height\" select=\"./height\" />\r\n		<xsl:variable name=\"width\" select=\"./width\" />\r\n		<xsl:if test=\"child::node()\">\r\n			<xsl:choose>				\r\n				<xsl:when test=\"$type=\'10\'\">\r\n					<xsl:choose>\r\n						<xsl:when test=\"$height!=\'-1\' and $width!=\'-1\' \">\r\n							<img src=\"image?resource_type=directory_entry_img&amp;id={$id}\" height=\"{$height}\" width=\"{$width}\"  />\r\n						</xsl:when>\r\n						<xsl:when test=\"$height=\'-1\' and $width!=\'-1\'\">\r\n							<img src=\"image?resource_type=directory_entry_img&amp;id={$id}\" width=\"{$width}\"  />\r\n						</xsl:when>\r\n						<xsl:when test=\"$height!=\'-1\' and $width=\'-1\'\">\r\n							<img src=\"image?resource_type=directory_entry_img&amp;id={$id}\" height=\"{$height}\" />\r\n						</xsl:when>\r\n						<xsl:otherwise>\r\n							<img src=\"image?resource_type=directory_entry_img&amp;id={$id}\"/>\r\n						</xsl:otherwise>\r\n					</xsl:choose>\r\n				</xsl:when>\r\n				<xsl:otherwise>\r\n					\r\n					<a  href=\"jsp/site/plugins/directory/DoDownloadFile.jsp?id_file={$id}\">\r\n					<xsl:value-of disable-output-escaping=\"yes\"\r\n						select=\"title\" />( <xsl:value-of disable-output-escaping=\"yes\"\r\n						select=\"size\" /> O)\r\n					</a>\r\n				</xsl:otherwise>\r\n			</xsl:choose>\r\n		</xsl:if>\r\n		<br />\r\n	</xsl:template>\r\n	<xsl:template match=\"status\">\r\n		<xsl:choose>\r\n			<xsl:when test=\"@display=\'yes\'\">\r\n				<th>Statut</th>\r\n			</xsl:when>\r\n			<xsl:otherwise>\r\n				<th>&#160;</th>\r\n			</xsl:otherwise>\r\n		</xsl:choose>\r\n		\r\n	</xsl:template>\r\n	\r\n	<xsl:template name=\"field-geolocalisation\">\r\n		<input type=\"hidden\" name=\"record_id\">\r\n			<xsl:attribute name=\"value\"><xsl:value-of disable-output-escaping=\"yes\" select=\"../../../@id\"/></xsl:attribute>\r\n		</input>\r\n		<xsl:if test=\"../../../status/@icon &gt; 0\">\r\n			<input type=\"hidden\" name=\"state_icon\">\r\n				<xsl:attribute name=\"value\">image?resource_type=workflow_icon_img&amp;id=<xsl:value-of disable-output-escaping=\"yes\" select=\"../../../status/@icon\"/></xsl:attribute> \r\n			</input>\r\n		</xsl:if>\r\n		<input type=\"hidden\" name=\"geolocation\">\r\n			<xsl:attribute name=\"value\"><xsl:value-of disable-output-escaping=\"yes\" select=\"../@id\" /></xsl:attribute>\r\n		</input>\r\n		\r\n		<input type=\"hidden\" name=\"title\">\r\n			<xsl:attribute name=\"value\"><xsl:value-of disable-output-escaping=\"yes\" select=\"../../entry[position()=1]/list-record-field/record-field[position()=1]/record-field-value\" /></xsl:attribute>\r\n		</input>\r\n		\r\n		<input type=\"hidden\">\r\n			<xsl:attribute name=\"name\">x</xsl:attribute>\r\n			<xsl:attribute name=\"id\">x</xsl:attribute>\r\n			<xsl:attribute name=\"value\"><xsl:value-of disable-output-escaping=\"yes\" select=\"record-field[@title=\'X\']\" /></xsl:attribute>\r\n		</input>\r\n		\r\n		<input type=\"hidden\">\r\n			<xsl:attribute name=\"name\">y</xsl:attribute>\r\n			<xsl:attribute name=\"id\">y</xsl:attribute>\r\n			<xsl:attribute name=\"value\"><xsl:value-of disable-output-escaping=\"yes\" select=\"record-field[@title=\'Y\']\" /></xsl:attribute>\r\n		</input>\r\n		<xsl:value-of disable-output-escaping=\"yes\" select=\"record-field[@title=\'address\']\" />\r\n	</xsl:template>\r\n</xsl:stylesheet>\r\n\r\n\r\n');
