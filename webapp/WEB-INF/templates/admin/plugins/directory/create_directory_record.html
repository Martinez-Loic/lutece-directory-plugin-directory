<#include "/admin/util/editor/editor.html" />

<div class="content-box">
	<h2> #i18n{directory.create_directory_record.title}: '${directory.title}'</h2>
	<div id="form-content">
		<form action="jsp/admin/plugins/directory/DoCreateDirectoryRecord.jsp" method="post" name="" id=""  enctype="multipart/form-data">
			<input name="page" value="directory" type="hidden" />
			<input name="id_directory" value="${directory.idDirectory}" type="hidden" />
			<#list entry_list as entry>
				<#if entry.entryType.group>	
					<fieldset class="form-fieldset"> 
						<legend class="form-legend"> ${entry.title} </legend> 
						<#if entry.children?has_content>
	      					<#list entry.children as child >
      							<#assign entryKey=""+child.idEntry>
	      						<#if map_id_entry_list_record_field?? && map_id_entry_list_record_field[entryKey]??>
									${child.getHtmlFormEntry( locale,map_id_entry_list_record_field[entryKey],false )}
								<#else>
	      							${child.getHtmlFormEntry( locale,false )}
	      						</#if>
	      					</#list>
	      				</#if>
	      			</fieldset>
	      		<#else>
					<#assign entryKey=""+entry.idEntry>
	      			<#if map_id_entry_list_record_field?? && map_id_entry_list_record_field[entryKey]??>
	      				${entry.getHtmlFormEntry( locale,map_id_entry_list_record_field[entryKey],false )}
					<#else>
	      				${entry.getHtmlFormEntry( locale,false )}
	      			</#if>
	      		</#if>
			</#list>
	 			
	 			 <p>
	  				<input type="submit" value="#i18n{directory.create_directory_record.button_save}" class="button" name="save" />
	  				<input type="submit" value="#i18n{directory.create_directory_record.button_cancel}" class="button" name="cancel" />
	   			</p>
			</form>
		</div>
</div>

<@initEditor />

<script src="js/plugins/directory/uploadify/jquery.uploadify.v2.1.4.min.js" type="text/javascript"></script>
<script src="js/plugins/directory/uploadify/swfobject.js" type="text/javascript"></script>
<script src="js/plugins/directory/directoryupload.js" type="text/javascript"></script>

<script language="JavaScript" type="text/javascript">
//for datepicker questions
$(document).ready(function () 
{
	var locale = "en-US";
	if(document.getElementById("locale") != null)
	{
		locale = document.getElementById("locale").innerHTML;
	}

	$.datepicker.setDefaults({
		showOn: 'button', 
		buttonImageOnly: true, 
		buttonImage: 'js/jquery/plugins/ui/datepicker/calendar.png', 
		buttonText: 'Calendar', 
		showAnim: 'slideDown', 
		speed: 'fast'
	});

	$( ".datepicker-element" ).each(function( i ){
		/*$(this).datepicker($.extend({showStatus: true}, $.datepicker.regional[locale]));*/
		$(this).datepicker();
	});
});
</script>
