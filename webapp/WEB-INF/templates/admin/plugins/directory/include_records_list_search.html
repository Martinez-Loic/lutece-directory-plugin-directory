<fieldset>
	<legend>#i18n{directory.create_directory.label_radio_state_search} </legend>
    <#-- DIRECTORY ENTRY FIELD FOR SEARCH FORM -->
	<#assign sort_search_attribute = "&amp;session=session&amp;search=search">
	<#if entry_list_form_main_search?has_content>
		<#list entry_list_form_main_search as entry>	
		<#assign entryKey=""+entry.idEntry>	
			<#if map_id_entry_list_record_field?exists && map_id_entry_list_record_field[entryKey]?exists>
				${entry.getHtmlFormSearchEntry( locale,map_id_entry_list_record_field[entryKey],false )}
				<#if map_id_entry_list_record_field[entryKey]?has_content>
					<#list map_id_entry_list_record_field[entryKey] as default_value>
						<#if default_value?? && default_value.value??>
							<#if isEntryTypeMyLuteceUser(entry) || isEntryTypeDirectory(entry) || isEntryTypeNumbering(entry)>
								<#assign sort_search_attribute = sort_search_attribute + "&amp;" + entryKey + "=" + default_value.value>
							<#elseif isEntryTypeGeolocation(entry)>
								<#if default_value.field?? && default_value.field.title?? && default_value.field.title = "address" && default_value.value??>
									<#assign sort_search_attribute = sort_search_attribute + "&amp;" + entryKey + "_address=" + entry.convertRecordFieldValueToString(default_value,locale,false,false)>
								</#if>
							<#else>
								<#assign sort_search_attribute = sort_search_attribute + "&amp;" + entryKey + "=" + entry.convertRecordFieldValueToString(default_value,locale,false,false)>
							</#if>
						</#if>
					</#list>
				</#if>
			<#else>
				${entry.getHtmlFormSearchEntry( locale , false)}
			</#if>
		</#list>
	</#if>
	<#-- RECORD CREATION DATE FOR SEARCH FORM -->
	<#if directory.isDateShownInSearch() & !( directory.isDateShownInAdvancedSearch() )>
		<div class="form-group">
			<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" class="control-label" > #i18n{directory.manage_directory_record.date_creation}</label>	
			<#if directory.isDateShownInMultiSearch()>
				<div class="controls controls-row">
					<label class="inline">#i18n{directory.html_code_form_search_entry_type_date.of}</label>
					<input type="text" class="input-small datepicker-element" name="date_begin_creation" id="date_begin_creation"  value="<#if date_creation_begin_search??>${date_creation_begin_search?date}</#if>" />
					<label class="inline">#i18n{directory.html_code_form_search_entry_type_date.to}</label>
					<input type="text" class="input-small datepicker-element" name="date_end_creation" id="date_end_creation"  value="<#if date_creation_end_search??>${date_creation_end_search?date}</#if>" />
				</div>	
			<#else>
				<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
					<input type="text" class="input-small datepicker-element" name="date_creation" id="date_creation" size="10" value="<#if date_creation_search??>${date_creation_search?date}</#if>" />
				</div>
			</#if>	 
		</div>
	</#if>

	<#-- RECORD MODIFICATION DATE FOR SEARCH FORM -->
	<#if directory.isDateModificationShownInSearch() & !( directory.isDateModificationShownInAdvancedSearch() )>
	<div class="form-group">
		<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" class="control-label" > #i18n{directory.manage_directory_record.date_modification} :</label>	
		<#if directory.isDateModificationShownInMultiSearch()>
			<div class="controls controls-row">
				<label class="inline">#i18n{directory.html_code_form_search_entry_type_date.of}</label>
				<input type="text" class="input-small datepicker-element" name="date_begin_modification" id="date_begin_modification" size="10" value="<#if date_modification_begin_search??>${date_modification_begin_search?date}</#if>" />
				<label class="inline">#i18n{directory.html_code_form_search_entry_type_date.to}</label>
				<input type="text" class="input-small datepicker-element" name="date_end_modification" id="date_end_modification" size="10" value="<#if date_modification_end_search??>${date_modification_end_search?date}</#if>" />
			</div>		
		<#else>
			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
				<input type="text" class="input-small datepicker-element" name="date_modification" id="date_modification" size="10" value="<#if date_modification_search??>${date_modification_search?date}</#if>" />
			</div>
		</#if>	 
	</div>
	</#if>
	<#-- RECORD WORKLFOW STATE FOR SEARCH FORM -->
	<#if directory.displaySearchState>
	<div class="form-group">
		<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" class="control-label" > #i18n{directory.manage_directory_record.label_state}</label>
		<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
			<@combo name="search_state_workflow"  items=search_state_workflow default_value=search_state_workflow_default />
		</div>
	</div>
	</#if>
<#-- ADVANCED SEARCH -->
<#if entry_list_form_complementary_search?has_content || directory.isDateShownInAdvancedSearch() || directory.isDateModificationShownInAdvancedSearch() >
	<fieldset>
		<legend>
			#i18n{directory.manage_directory_record.label_complementary_search}
			<span class="pull-right"> <i id="toggleAdvSearch" class="glyphicon glyphicon-chevron-down"></i> </span>
		</legend>
		<div id="advanced-search">
		<#list entry_list_form_complementary_search as entry>	
			<#assign entryKey=""+entry.idEntry>	
			<#if map_id_entry_list_record_field?exists && map_id_entry_list_record_field[entryKey]?exists>
				${entry.getHtmlFormSearchEntry( locale,map_id_entry_list_record_field[entryKey],false )}	
			<#else>
				${entry.getHtmlFormSearchEntry( locale, false )}	
			</#if>
        </#list>
        <#if directory.displayComplementarySearchState>
        <div class="form-group">
            <label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" class="control-label" > #i18n{directory.manage_directory_record.label_state}</label>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <@combo name="search_state_workflow"  items=search_state_workflow default_value=search_state_workflow_default />
            </div>	
        </div>
        </#if>
        <#-- RECORD CREATION DATE FOR ADVANCED SEARCH FORM -->
        <#if directory.isDateShownInSearch() & directory.isDateShownInAdvancedSearch()>
        <div class="form-group">
            <label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" class="control-label" > #i18n{directory.manage_directory_record.date_creation}</label>	
            <div class="controls controls-row">
            <#if directory.isDateShownInMultiSearch()>
                <label class="inline">#i18n{directory.html_code_form_search_entry_type_date.of}
                <input type="text" class="input-small datepicker-element" name="date_begin_creation" id="date_begin_creation" value="<#if date_creation_begin_search??>${date_creation_begin_search?date}</#if>" />
				</label>
                <label class="inline">#i18n{directory.html_code_form_search_entry_type_date.to}
                <input type="text" class="input-small datepicker-element" name="date_end_creation" id="date_end_creation" value="<#if date_creation_end_search??>${date_creation_end_search?date}</#if>" />
				</label>
            <#else>
                <input type="text" class="input-small datepicker-element" name="date_creation" id="date_creation" value="<#if date_creation_search??>${date_creation_search?date}</#if>" />
            </#if>	 
            </div>
        </div>
        </#if>

        <#-- RECORD MODIFICATION DATE FOR ADVANCED SEARCH FORM -->
        <#if directory.isDateModificationShownInSearch() & directory.isDateModificationShownInAdvancedSearch()>
        <div class="form-group">
            <label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" class="control-label" > #i18n{directory.manage_directory_record.date_modification}</label>
				<div class="controls controls-row">
				<#if directory.isDateModificationShownInMultiSearch()>
				<label class="inline">#i18n{directory.html_code_form_search_entry_type_date.of}
					<input type="text" class="input-small datepicker-element" name="date_begin_modification" id="date_begin_modification" value="<#if date_modification_begin_search??>${date_modification_begin_search?date}</#if>" />
				</label>
				<label class="inline">#i18n{directory.html_code_form_search_entry_type_date.to}
					<input type="text" class="input-small datepicker-element" name="date_end_modification" id="date_end_modification" value="<#if date_modification_end_search??>${date_modification_end_search?date}</#if>" />
				</label>
            <#else>
				
					<input type="text" class="input-small datepicker-element" name="date_modification" id="date_modification" value="<#if date_modification_search??>${date_modification_search?date}</#if>" />
            </#if>	 
				</div>
        </div>
        </#if>
		</div>
		</fieldset>
    </#if>
	<div class="form-group"/>
		<button class="btn btn-sm" name="resetsearch" value="true" data-dismiss="modal" aria-hidden="true">
			<i class="glyphicon glyphicon-remove-circle"></i>&nbsp;#i18n{portal.util.labelCancel}
		</button>
		<button class="btn btn-primary btn-sm" type="submit" name="search">
			<i class="glyphicon glyphicon-search"></i>&nbsp;#i18n{directory.manage_directory_record.button_search}
		</button>
	
	</div>
</fieldset>
