<#include "/admin/plugins/directory/commons.html" />

<script language="JavaScript" type="text/javascript">

	window.onload = function() 
	{
		doDisplayAdvancedSettings( false,'fields' );
	}
	
</script> 

<div id="content-box-actions">	
  	<form id="button_advanced_settings" method="post" action="javascript:doDisplayAdvancedSettings(true,'fields')" style="visibility:hidden;display:none;">
		<input type="submit" value="#i18n{directory.manage_directory.button_manage_advanced_parameters}" class="button bt-toolbar" />
  	</form>	
  	<form id="button_back" method="post" action="javascript:doDisplayAdvancedSettings(false,'fields')" style="visibility:hidden;display:none;">
		<input type="submit" value="#i18n{directory.manage_directory.button_back}" class="button bt-toolbar" />
  	</form>	
</div>

<form action="jsp/admin/plugins/directory/DoModifyEntry.jsp#list" method="post" name="" id=""  >
<div class="content-box" id="settings">
 <h2>#i18n{directory.modify_entry.title_field} : '${entry.directory.title}'</h2>
 
    <input name="id_entry" value="${entry.idEntry}" type="hidden" />
	<p>
    	<label for="title">#i18n{directory.create_entry.label_title} * : </label>
    	<input type="text" name="title" id="title" size="80" value="${entry.title}"  maxlength="255"/>
    	<br/>
		<label>&nbsp;</label>#i18n{directory.create_entry.label_title_comment}
 	</p>
   <p>
     <label for="help_message">#i18n{directory.create_entry.label_help_message} :  </label>
    
     	<textarea  name="help_message"  id="help_message" cols="80" rows="5">${entry.helpMessage}</textarea>
	
	 <br/>
	 <label>&nbsp;</label> #i18n{directory.create_entry.label_help_message_comment}
	</p>
	<p>
	     <label for="help_message_search">#i18n{directory.create_entry.label_help_message_search} : </label>
	   		<textarea  name="help_message_search"  id="help_message_search" cols="80" rows="5">${entry.helpMessageSearch}</textarea>
		<br/>
		 <label>&nbsp;</label> #i18n{directory.create_entry.label_help_message_search_comment}
	</p>
    <p>
     <label for="comment"> #i18n{directory.create_entry.label_comment} : </label>

     <textarea name="comment" cols="80" rows="2">${entry.comment}</textarea>
     </p>
    <p>
     <label for="">#i18n{directory.create_entry.label_type} :</label>
           #i18n{${entry.entryType.titleI18nKey}}
	</p>
	
	<p>
    	<label for="is_all_search">#i18n{directory.create_entry.label_is_all_search} : </label>
    	<#if entry.addValueAllSearch>
    		<input type="checkbox" name="is_all_search" id="is_all_search" value="1" checked="checked" onclick="javascript:addAllSearch();" />
    	<#else>
   			<input type="checkbox" name="is_all_search" id="is_all_search" value="1" onclick="javascript:addAllSearch();" />
   		</#if>
   		<br />
   		<label>&nbsp;</label>#i18n{directory.create_entry.label_is_all_search_comment}
   	</p>
   	<div id="label_value_all_search">
   		<p>
   			<label for="label_all_search">#i18n{directory.create_entry.label_label_all_search} : </label>
	    	<#if entry.labelValueAllSearch??>
	    		<input type="text" name="label_all_search" id="label_all_search" value="${entry.labelValueAllSearch}" size="80" maxlength="255" />
	    	<#else>
	   			<input type="text" name="label_all_search" id="label_all_search" value="" size="80" maxlength="255" />
	   		</#if>
	   	</p>
	</div>
	
	  <p>
    	<label for="mandatory">#i18n{directory.create_entry.label_mandatory} : </label>
   		 <#if entry.mandatory>
   		 	<input name="mandatory" value="1" type="checkbox" checked="checked" >
   		 <#else>
   			<input name="mandatory" value="1" type="checkbox" >
   		 </#if>	
   </p>
   <#if is_authentification_enabled&&(!is_association_entry_role || entry.roleAssociated)>
	   	<p>
	    	 <label for="role_associated">#i18n{directory.create_entry.label_role_associated} :</label>
	   		 <#if entry.roleAssociated>
	   			 <input name="role_associated" value="1" type="checkbox" checked="checked"/>
	   		<#else>
	   			 <input name="role_associated" value="1" type="checkbox"/>
	   		</#if>	 
	   		<br/>
		 	<label>&nbsp;</label> #i18n{directory.create_entry.label_role_associated_comment}
		 </p>	
    </#if>
	<#if !is_association_entry_workgroup|| entry.workgroupAssociated> 		
	 <p>
    	 <label for="workgroup_associated">#i18n{directory.create_entry.label_workgroup_associated} :</label>
   		 
   		  <#if entry.workgroupAssociated>
   		 		<input name="workgroup_associated" value="1" type="checkbox" checked="checked"/>
   		 <#else>
   		 		<input name="workgroup_associated" value="1" type="checkbox" />
   		 </#if>		
   		<br/>
	 	<label>&nbsp;</label> #i18n{directory.create_entry.label_workgroup_associated_comment}
	 </p>	
  </#if>
	
	<p>
  		<input type="submit" value="#i18n{directory.modify_entry.button_save}" class="button"  name="save" / >
  		<input type="submit" value="#i18n{directory.modify_entry.button_apply}" class="button"  name="apply"/ >
  		<input type="submit" value="#i18n{directory.modify_entry.button_cancel}" class="button" name="cancel" />
	</p>
	<br/>
</div>
<div id="advanced_settings" class="content-box">
	 	<h2>
			#i18n{directory.create_directory.label_advancedsettings}
		</h2>
 	
 		<p>
	    	<label for="indexed">#i18n{directory.create_entry.label_indexed} : </label>
	   		 <#if entry.indexed>
	   		 	<input name="indexed" value="1" type="checkbox" checked="checked" >
	   		 <#else>
	   			<input name="indexed" value="1" type="checkbox" >
	   		 </#if>	
	  	 </p>
	    <p>
	    	<label for="shown_in_advanced_search">#i18n{directory.create_entry.label_shown_in_advanced_search} :</label>
	   		 <#if entry.shownInAdvancedSearch>
	   		 	<input name="shown_in_advanced_search" value="1" type="checkbox" checked="checked">
	   		 <#else>
	   		 	<input name="shown_in_advanced_search" value="1" type="checkbox" >
	   		 
	   		 </#if>	
	   		<br/>
		 	<label>&nbsp;</label> #i18n{directory.create_entry.label_shown_in_advanced_search_comment}
		 </p>
		 <p>
            <label for="indexed_as_title">#i18n{directory.create_entry.label_indexed_as_title} : </label>
            <input name="indexed_as_title" value="1" type="checkbox" <#if entry.indexedAsTitle>checked="checked"</#if> >
         </p>
         <p>
            <label for="indexed_as_summary">#i18n{directory.create_entry.label_indexed_as_summary} : </label>
            <input name="indexed_as_summary" value="1" type="checkbox" <#if entry.indexedAsSummary>checked="checked"</#if> >
         </p>
         <p>
	    	<label for="shown_in_result_list">#i18n{directory.create_entry.label_shown_in_result_list} :</label>
	   		  <#if entry.shownInResultList>
	   		 	<input name="shown_in_result_list" value="1" type="checkbox" checked="checked">
	   		  <#else>
	   		 		<input name="shown_in_result_list" value="1" type="checkbox" >
	   		  
	   		  </#if>	
	   		<br/>
		 	<label>&nbsp;</label> #i18n{directory.create_entry.label_shown_in_result_list_comment}
		 </p>	
	   	 <p>
	    	 <label for="shown_in_result_record">#i18n{directory.create_entry.label_shown_in_result_record} :</label>
	   			<#if entry.shownInResultRecord>
	   			 	<input name="shown_in_result_record" value="1" type="checkbox" checked="checked">
	   			  <#else>
	   			  	<input name="shown_in_result_record" value="1" type="checkbox">
	   			  </#if>	
	   		<br/>
		 	<label>&nbsp;</label> #i18n{directory.create_entry.label_shown_in_result_record_comment}
		 </p>
		 <p>
	    	 <label for="shown_in_history">#i18n{directory.create_entry.label_shown_in_history} :</label>
	   			<#if entry.shownInHistory>
	   			 	<input name="shown_in_history" value="1" type="checkbox" checked="checked">
	   			  <#else>
	   			  	<input name="shown_in_history" value="1" type="checkbox">
	   			  </#if>	
	   		<br/>
		 	<label>&nbsp;</label> #i18n{directory.create_entry.label_shown_in_history_comment}
		 </p>
		 <p>
	    	<label for="shown_in_export">#i18n{directory.create_entry.label_shown_in_export} :</label>
	    	<#if entry.shownInExport>
	   			<input name="shown_in_export" value="1" type="checkbox" checked="checked" />
	   		<#else>
	   			<input name="shown_in_export" value="1" type="checkbox" />
	   		</#if>
	   		<br/>
		 	<label>&nbsp;</label> #i18n{directory.create_entry.label_shown_in_export_comment}
		</p>
		<div class="alert">
			 #i18n{directory.message.warning.entry_advanced_parameters_save}
		</div>
	 </div>
	
</form>

<div class="content-box" id="fields">
	<h2>#i18n{directory.create_entry.manage_field.title}</h2>
	<@paginationAdmin paginator=paginator combo=1/>
	<a name="list" id="list"></a>
        <table width="100%">
          <tr> 
            
            <th>
            	 #i18n{directory.create_entry.manage_field.row_title}
            </th>
            <th> 
            	#i18n{directory.create_entry.manage_field.row_value}
            </th>
            <th> 
            	#i18n{directory.create_entry.manage_field.row_default_value}
            </th>
            <th>
            	 #i18n{directory.create_entry.manage_field.row_key}
            </th>
			 <th>
			 	 #i18n{directory.create_entry.manage_field.row_actions}
            </th>
          </tr>
          <#assign cpt=0>
           <#list list as field>
          	<#assign cpt=cpt+1>
          	<tr>
          		
            	<td>
            			<a href="jsp/admin/plugins/directory/ModifyField.jsp?id_field=${field.idField}"  class="bullet-link">
              				${field.title}
              			</a>
           		</td>
	            <td>
	           		${field.value}
	           </td>
	            <td>
	       			<#if field.defaultValue>
	       				<img  src="images/admin/skin/plugins/directory/actions/enable.png" />    
	       			</#if> 	 	
	            </td>
	            <td>
          				${field.idField}
          		</td>
	           	<td>
	               <#if cpt!=1 || paginator.pageCurrent != 1>
	              		<a href="jsp/admin/plugins/directory/DoMoveUpField.jsp?id_field=${field.idField}#list">
	                 	 <img src="images/admin/skin/plugins/directory/actions/up.png"  alt="#i18n{directory.create_entry.manage_field.title_move_up}" title="#i18n{directory.create_entry.manage_field.title_move_up}">
	               	  </a>
	                </#if> 
	               <#if field_has_next || paginator.pageCurrent != paginator.pagesCount>
	               	 <a href="jsp/admin/plugins/directory/DoMoveDownField.jsp?id_field=${field.idField}#list">
	                 	 <img src="images/admin/skin/plugins/directory/actions/down.png" alt="#i18n{directory.create_entry.manage_field.title_move_down}" title="#i18n{directory.create_entry.manage_field.title_move_down}">
	                 </a>
	               </#if>
	                <a href="jsp/admin/plugins/directory/ConfirmRemoveField.jsp?id_field=${field.idField}#list">
	                  <img src="images/admin/skin/plugins/directory/actions/delete.png" alt="#i18n{directory.create_entry.manage_field.title_delete}" title="#i18n{directory.create_entry.manage_field.title_delete}" />
	                </a>
	             </td>
	          </tr>
			</#list> 
        </table>
        <@paginationAdmin paginator=paginator />
        <form method="post"  action="jsp/admin/plugins/directory/CreateField.jsp">
          <p>
            <input type="submit" value="#i18n{directory.create_entry.manage_field.button_insert}" class="button" />
            <a href="jsp/admin/plugins/directory/ImportField.jsp?id_directory=${idDirectory}&amp;id_entry=${entry.idEntry}">
            	<input type="button" class="button" value="#i18n{directory.import_field.title}" />
            </a>
          </p>
        </form>
    </div>

<script type="text/javascript">
	function addAllSearch()
	{
 		var inputAllSearch = document.getElementById("is_all_search");
 		if(inputAllSearch.checked)
 		{
 			document.getElementById("label_value_all_search").style.display = "block";
 		}
 		else
 		{
 			document.getElementById("label_value_all_search").style.display = "none";
 		}
 	}
 	
	addAllSearch();
</script>
