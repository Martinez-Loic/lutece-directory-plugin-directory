<#include "/admin/plugins/directory/commons.html" />
<form class="form" action="jsp/admin/plugins/directory/DoModifyEntry.jsp#list" method="post" name="" id=""  >
<input name="id_entry" value="${entry.idEntry}" type="hidden" />
	<div class="row-fluid">
	<div class="span8 form-horizontal">
	<fieldset>
		<legend>
		#i18n{directory.modify_entry.title_field} '${entry.directory.title}' 
		<span class="label label-info" title="#i18n{directory.create_entry.label_type}">#i18n{${entry.entryType.titleI18nKey}}</span>
		<a class="btn btn-primary btn-small pull-right" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}#list" title="#i18n{directory.manage_directory.button_back} #i18n{directory.modify_directory.manage_entry.title} '${entry.directory.title}'">
			<i class="icon-chevron-left icon-white"></i>
		</a>
		</legend>
		<div class="control-group">
			<label class="control-label" for="title">#i18n{directory.create_entry.label_title} * : </label>
			<div class="controls">
				<input type="text" name="title" id="title" class="input-xxlarge" value="${entry.title}" maxlength="255" />
				<p class="help-block">#i18n{directory.create_entry.label_title_comment}</p>
			</div>
		</div>
    	<div class="control-group">
			<label class="control-label" for="is_all_search">#i18n{directory.create_entry.label_is_all_search}</label>
			<div class="controls">
				<input type="checkbox" name="is_all_search" id="is_all_search" value="1" <#if entry.addValueAllSearch>checked="checked"</#if> />
    			<p class="help-block">#i18n{directory.create_entry.label_is_all_search_comment}</p>
			</div>
		</div>
		<div class="control-group" id="label_value_all_search">
   			<label class="control-label" for="label_all_search">#i18n{directory.create_entry.label_label_all_search} : </label>
			<div class="controls">
	    		<input type="text" name="label_all_search" id="label_all_search" value="<#if entry.labelValueAllSearch??>${entry.labelValueAllSearch!}</#if>" class="input-xlarge" maxlength="255" />
	    	</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="mandatory">#i18n{directory.create_entry.label_mandatory}</label>
			<div class="controls">
				<input name="mandatory" id="mandatory" value="1" type="checkbox" <#if entry.mandatory>checked="checked"</#if> />
			</div>
		</div>
		<#if is_authentification_enabled&&(!is_association_entry_role || entry.roleAssociated)>
	   	<div class="control-group">
			<label class="control-label" for="role_associated">#i18n{directory.create_entry.label_role_associated}</label>
			<div class="controls">
	   		   	<input name="role_associated" id="role_associated" value="1" type="checkbox"  <#if entry.roleAssociated>checked="checked"</#if>	/>
	   			<p class="help-block"> #i18n{directory.create_entry.label_role_associated_comment}</p>
			</div>
		</div>	
    </#if>
	<#if !is_association_entry_workgroup|| entry.workgroupAssociated> 		
		<div class="control-group">
			<label class="control-label" for="workgroup_associated">#i18n{directory.create_entry.label_workgroup_associated}</label>
			<div class="controls">
				<input name="workgroup_associated" id="workgroup_associated" value="1" type="checkbox" <#if entry.workgroupAssociated>checked="checked"</#if>/>
				<p class="help-block"> #i18n{directory.create_entry.label_workgroup_associated_comment}</p>
			</div>
		</div>		
	</#if>
		<div class="form-actions">
			<button class="btn btn-primary  btn-small" type="submit" name="save" >
				<i class="icon-ok icon-white" ></i>
				<span class="hidden-phone" >#i18n{directory.modify_entry.button_save}</span>
			</button>
			<button class="btn btn-primary btn-small" type="submit" name="apply" >
				<i class="icon-ok-circle icon-white" ></i>
				<span class="hidden-phone" >#i18n{directory.modify_entry.button_apply}</span>
			</button>
			<a class="btn btn-small" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}">
				<i class="icon-remove-circle" ></i>
				<span class="hidden-phone" >#i18n{directory.modify_entry.button_cancel}</span>
			</a>
		</div>
	</fieldset>
	<fieldset>
		<legend>#i18n{directory.create_entry.manage_field.title}
			<form class="form-inline pull-right" method="post"  action="jsp/admin/plugins/directory/CreateField.jsp">
				<a class="btn btn-primary btn-small" href="jsp/admin/plugins/directory/CreateField.jsp">
					<i class="icon-ok icon-white"></i>
					<span class="hidden-phone" >&nbsp;#i18n{directory.create_entry.manage_field.button_insert}</span>
				</a>
				<a class="btn btn-primary btn-small" href="jsp/admin/plugins/directory/ImportField.jsp?id_directory=${idDirectory}&amp;id_entry=${entry.idEntry}">
					<i class="icon-upload icon-white"></i>
					<span class="hidden-phone" >&nbsp;#i18n{directory.import_field.title}</span>
				</a>
			</form>
		</legend>
	    <table class="table table-striped table-condensed">
          <tr>
			<th>#i18n{directory.create_entry.manage_field.row_title}</th>
            <th>#i18n{directory.create_entry.manage_field.row_value}</th>
            <th>#i18n{directory.create_entry.manage_field.row_default_value}</th>
			<th>#i18n{directory.create_entry.manage_field.row_key}</th>
			<th>#i18n{directory.create_entry.manage_field.row_actions}</th>
          </tr>
          <#assign cpt=0>
           <#list list as field>
          	<#assign cpt=cpt+1>
          	<tr>
          		<td>${field.title}</td>
	            <td>${field.value}</td>
	            <td>
	       			<#if field.defaultValue>
	       				<span class="label label-success"><i class="icon-ok icon-white"></i></span>  
	       			</#if> 	
	            </td >
	            <td>${field.idField}</td>
	            <td>
					<a class="btn btn-primary btn-small" href="jsp/admin/plugins/directory/ModifyField.jsp?id_field=${field.idField}"  title="null" >
						<i class="icon-edit icon-white"></i>
					</a>
					<#if cpt!=1>
	              	<a class="btn btn-primary btn-small" href="jsp/admin/plugins/directory/DoMoveUpField.jsp?id_field=${field.idField}#list"  title="#i18n{directory.create_entry.manage_field.title_move_up}" >
						<i class="icon-chevron-up icon-white"></i>
					</a>
					</#if> 
	               <#if field_has_next>
	                <a class="btn btn-primary btn-small" href="jsp/admin/plugins/directory/DoMoveDownField.jsp?id_field=${field.idField}#list"  title="#i18n{directory.create_entry.manage_field.title_move_down}" >
						<i class="icon-chevron-down icon-white"></i>
					</a>
					</#if>
	                <a class="btn btn-danger btn-small" href="jsp/admin/plugins/directory/ConfirmRemoveField.jsp?id_field=${field.idField}#list"  title="#i18n{directory.create_entry.manage_field.title_delete}" >
						<i class="icon-trash icon-white"></i>
					</a>
					</td>
	          </tr>
			</#list> 
        </table>
        
        </fieldset>
	</div>
	<div id="advanced_settings" class="span4">
	<fieldset>
		<legend>#i18n{directory.create_directory.label_advancedsettings}</legend>	 	
		<label  for="help_message"> #i18n{directory.create_entry.label_help_message} </label>
			<textarea  name="help_message" id="help_message" class="span7" rows="2">${entry.helpMessage}</textarea>
			<p class="help-block">#i18n{directory.create_entry.label_help_message_comment}</p>
		<div class="control-group">
			<label class="control-label" for="help_message_search"> #i18n{directory.create_entry.label_help_message_search} </label>
			<div class="controls">
				<textarea  name="help_message_search" id="help_message_search" class="span7" rows="2">${entry.helpMessageSearch}</textarea>
				<p class="help-block">#i18n{directory.create_entry.label_help_message_search_comment}</p>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="comment"> #i18n{directory.create_entry.label_comment}</label>
			<div class="controls">
				<textarea name="comment" class="span7" rows="2">${entry.comment}</textarea>
			</div>
		</div>
		<div class="control-group">
	   		<div class="controls">
				<label class="checkbox" for="indexed">
				<input name="indexed" value="1" type="checkbox"  <#if entry.indexed>checked="checked"</#if> >
				 #i18n{directory.create_entry.label_indexed}
				</label>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="checkbox" for="shown_in_advanced_search">
				<input name="shown_in_advanced_search" value="1" type="checkbox" <#if entry.shownInAdvancedSearch>checked="checked"</#if>>
				 #i18n{directory.create_entry.label_shown_in_advanced_search}
				</label>
				<p class="help-block">#i18n{directory.create_entry.label_shown_in_advanced_search_comment}</p>
			</div>
		</div>
		<div class="control-group">
            <div class="controls">
				<label class="checkbox" for="indexed_as_title">
				<input name="indexed_as_title" value="1" type="checkbox" <#if entry.indexedAsTitle>checked="checked"</#if>>
				 #i18n{directory.create_entry.label_indexed_as_title}
				</label>
			</div>
		</div>
        <div class="control-group">
            <div class="controls">
				<label class="control-label" for="indexed_as_summary">
				<input name="indexed_as_summary" value="1" type="checkbox" <#if entry.indexedAsSummary>checked="checked"</#if>>
				 #i18n{directory.create_entry.label_indexed_as_summary}
				</label>
			</div>
		</div>
        <div class="control-group">
			<div class="controls">
				<label class="checkbox" for="shown_in_result_list">
					<input name="shown_in_result_list" value="1" type="checkbox" <#if entry.shownInResultList>checked="checked"</#if>>
					#i18n{directory.create_entry.label_shown_in_result_list}
				</label>
				<p class="help-block">#i18n{directory.create_entry.label_shown_in_result_list_comment}</p>
			</div>
		</div>
		<div class="control-group">
	   		<div class="controls">
				<label class="checkbox" for="shown_in_result_record">
					<input name="shown_in_result_record" value="1" type="checkbox" <#if entry.shownInResultRecord>checked="checked"</#if>>
	 				 #i18n{directory.create_entry.label_shown_in_result_record}
				</label>
				<p class="help-block">#i18n{directory.create_entry.label_shown_in_result_record_comment}</p>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="checkbox" for="shown_in_history">
					<input name="shown_in_history" value="1" type="checkbox" <#if entry.shownInHistory>checked="checked"</#if>>
					#i18n{directory.create_entry.label_shown_in_history}
				</label>
				<p class="help-block">#i18n{directory.create_entry.label_shown_in_history_comment}</p>
			</div>
		</div>
		<div class="control-group">
			<div class="controls">
				<label class="control-label" for="shown_in_export">
					<input name="shown_in_export" value="1" type="checkbox" <#if entry.shownInExport>checked="checked"</#if>>
					#i18n{directory.create_entry.label_shown_in_export}
				</label>
				<p class="help-block">#i18n{directory.create_entry.label_shown_in_export_comment}</p>
			</div>
		</div>
		<div class="control-group">
			<label class="control-label" for="shown_in_completeness"></label>
	    	<div class="controls">
				<label class="checkbox" for="shown_in_completeness">
					<input name="shown_in_completeness" value="1" type="checkbox" <#if entry.shownInCompleteness>checked="checked"</#if>>
					#i18n{directory.create_entry.label_shown_in_completeness}
				</label>
				<p class="help-block">#i18n{directory.create_entry.label_shown_in_completeness_comment}</p>
			</div>
		</div>
 		</fieldset>
	</div>
</form>


<script>
function addAllSearch()	{
	if( $("#is_all_search:checked").length > 0 ){
		$("#label_value_all_search").show();
	} else {
		$("#label_value_all_search").hide();
	}
}
$(document).ready(function () {
	addAllSearch(); 
	$("#is_all_search").click( function(){
		addAllSearch();
	});
});
</script>
