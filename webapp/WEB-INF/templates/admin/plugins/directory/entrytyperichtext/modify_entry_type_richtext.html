<#include "/admin/plugins/directory/commons.html" />
<div class="row">
<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
<fieldset>
	<legend>
	#i18n{directory.modify_entry.title_field} : '${entry.directory.title}' 
	<span class="label label-info" title="#i18n{directory.create_entry.label_type}">#i18n{${entry.entryType.titleI18nKey}}</span>
		<a class="btn btn-primary btn-sm pull-right" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}#list" title="#i18n{directory.manage_directory.button_back} #i18n{directory.modify_directory.manage_entry.title} '${entry.directory.title}'">
			<i class="glyphicon glyphicon-chevron-left"></i>
		</a>
	<form class="form-inline pull-right" id="button_advanced_settings" method="post" action="javascript:doDisplayAdvancedSettings(true, 'regular_expression')" style="visibility:hidden;display:none;">
		<button class="btn btn-primary pull-right" type="submit" >
			<i class="glyphicon glyphicon-plus"></i>
			<span class="hidden-xs" >#i18n{directory.manage_directory.button_manage_advanced_parameters}</span>
		</button>
	</form>	
	<form class="form-inline spaced pull-right" id="button_back" method="post" action="javascript:doDisplayAdvancedSettings(false, 'regular_expression')" style="visibility:hidden;display:none;">
		<button class="btn btn-primary pull-right" type="submit">
			<i class="glyphicon glyphicon-plus" ></i>
			<span class="hidden-xs" >#i18n{directory.manage_directory.button_back}</span>
		</button>
	</form>	
	</legend>
	<form class="form-horizontal" action="jsp/admin/plugins/directory/DoModifyEntry.jsp#list" method="post" name="" id=""  >
	<input name="id_entry" value="${entry.idEntry}" type="hidden" />
	<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="title">#i18n{directory.create_entry.label_title} * </label>
	   	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
			<input type="text" name="title" id="title" class="form-control input-sm" value="${entry.title}"  maxlength="255" />
			<p class="help-block">#i18n{directory.create_entry.label_title_comment}</p>
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="help_message">#i18n{directory.create_entry.label_help_message}</label>
	   	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	     	<textarea  name="help_message"  id="help_message" class="form-control input-sm" rows="5">${entry.helpMessage}</textarea>
			<p class="help-block">#i18n{directory.create_entry.label_help_message_comment}</p>
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="help_message_search">#i18n{directory.create_entry.label_help_message_search} </label>
		 	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
				<textarea  name="help_message_search"  id="help_message_search"  class="form-control input-sm" rows="5">${entry.helpMessageSearch}</textarea>
				<p class="help-block">##i18n{directory.create_entry.label_help_message_search_comment}</p>
		</div>
	</div>
	<div class="form-group">
		<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="comment">#i18n{directory.create_entry.label_comment}</label>
	 	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
			<textarea name="comment"  class="form-control input-sm"" rows="2">${entry.comment}</textarea>
		</div>
	</div>
   <div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="value">#i18n{directory.create_entry.label_value_default}</label>
		<#list entry.fields as field>
			<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
				<textarea rows="2" class="form-control input-sm" id="value" name="value">${field.value}</textarea>
			</div>
		</#list>
	</div>
	<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="mandatory">#i18n{directory.create_entry.label_mandatory} </label>
   	 	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
			<input name="mandatory" value="1" type="checkbox" <#if entry.mandatory>checked="checked"</#if>	 >
		</div>
	</div>
	<div class="form-group">
		<div class="col-xs-12 col-sm-12 col-md-offset-3 col-md-9 col-lg-offset-3 col-lg-9">
			<button class="btn btn-primary btn-sm" type="submit" name="save">
				<i class="glyphicon glyphicon-ok"></i>&nbsp;#i18n{directory.modify_entry.button_save}
			</button>
			<button class="btn btn-primary btn-sm" type="submit" name="apply">
				<i class="glyphicon glyphicon-ok-circle"></i>&nbsp;#i18n{directory.modify_entry.button_apply}
			</button>
			<a class="btn btn-default btn-sm" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}">
				<i class="glyphicon glyphicon-remove-circle" ></i>
				<span class="hidden-xs" >#i18n{directory.create_entry.button_cancel}</span>
			</a>
		</div>
	</div>
	<#if regular_expression_list?exists>
	</fieldset>
	<div id="regular_expression">
	<fieldset> 
		<legend>#i18n{directory.create_entry.manage_regular_expression.title}</legend>
		<form class="form-search form-inline" method="post"  action="jsp/admin/plugins/directory/DoInsertVerification.jsp#list">
			<input name="id_field" value="${id_field}" type="hidden" />
			<div class="form-group">
				<label for="id_expression">#i18n{directory.create_entry.manage_regular_expression.label_insert}</label>
				<div class="input-group">
					<@comboWithParams name="id_expression"  items=regular_expression_list default_value="-1" additionalParameters="class='form-control input-sm'" />
					<span class="input-group-btn">
						<button class="btn btn-primary" type="submit" >
							<i class="glyphicon glyphicon-plus"></i>&nbsp;#i18n{directory.create_entry.manage_regular_expression.button_insert}
						</button>
					</span>
				</div>
				<p class="help-block" >#i18n{directory.create_entry.manage_regular_expression.label_insert_comment}</p>
			</div>
		</form>
	</fieldset>
		<@paginationAdmin paginator=paginator combo=1 />
	    <a name="list" id="list"></a>
        <table class="table table-striped table-condensed">
			<tr> 
				<th>#i18n{directory.create_entry.manage_regular_expression.row_title}</th>
				<th>#i18n{directory.create_entry.manage_regular_expression.row_information_message}</th>
				<th>#i18n{directory.create_entry.manage_regular_expression.row_valid_exemple}</th>
				<th>#i18n{directory.create_entry.manage_field.row_actions}</th>
			</tr>
			<#list list as expression>
          	<tr>
            	<td>${expression.title}</td>
	            <td>${expression.informationMessage}</td>
	            <td>${expression.validExemple}</td>
	            <td>
	             	<a class="btn btn-danger btn-xs" href="jsp/admin/plugins/directory/DoRemoveVerification.jsp?id_expression=${expression.idExpression}&id_field=${id_field}#list" title="#i18n{directory.create_entry.manage_field.title_delete}" >
						<i class="glyphicon glyphicon-trash"></i>
					</a>
				</td>
	        </tr>
			</#list> 
        </table>
        <@paginationAdmin paginator=paginator />
    </div>
	</#if>
	</div>
	<div id="advanced_settings" class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
		<fieldset>
			<legend>#i18n{directory.create_directory.label_advancedsettings}</legend>	 	
			<div class="checkbox">
				<label for="indexed">
					<input name="indexed" value="1" type="checkbox"  <#if entry.indexed>checked="checked"</#if> >
					#i18n{directory.create_entry.label_indexed}
				</label>
			</div>
	   		<div class="checkbox">
				<label for="shown_in_advanced_search">
					<input name="shown_in_advanced_search" value="1" type="checkbox"  <#if entry.shownInAdvancedSearch>checked="checked"</#if>>
					#i18n{directory.create_entry.label_shown_in_advanced_search}
					<span class="help-block">#i18n{directory.create_entry.label_shown_in_advanced_search_comment}</span>
				</label>
			</div>
			<div class="checkbox">
				<label for="indexed_as_title">
					<input name="indexed_as_title" value="1" type="checkbox" <#if entry.indexedAsTitle>checked="checked"</#if> >
					#i18n{directory.create_entry.label_indexed_as_title}
				</label>
			</div>
            <div class="checkbox">
				<label for="indexed_as_summary">
					<input name="indexed_as_summary" value="1" type="checkbox" <#if entry.indexedAsSummary>checked="checked"</#if> >
					#i18n{directory.create_entry.label_indexed_as_summary}
				</label>
			</div>
			<div class="checkbox">
				<label for="shown_in_result_list">
					<input name="shown_in_result_list" value="1" type="checkbox" <#if entry.shownInResultList>checked="checked" </#if>>
					#i18n{directory.create_entry.label_shown_in_result_list}
					<span class="help-block">#i18n{directory.create_entry.label_shown_in_result_list_comment}</label> 
				</label>
			</div>
	    	<div class="checkbox">
				<label for="shown_in_result_record">
					<input name="shown_in_result_record" value="1" type="checkbox" <#if entry.shownInResultRecord>checked="checked"</#if>>
					#i18n{directory.create_entry.label_shown_in_result_record}
					<span class="help-block">#i18n{directory.create_entry.label_shown_in_result_record_comment}</label> 
				</label>
			</div>
			<div class="checkbox">
				<label for="shown_in_history">
					<input name="shown_in_history" value="1" type="checkbox" <#if entry.shownInHistory>checked="checked"</#if> > 
					#i18n{directory.create_entry.label_shown_in_history}
					<span class="help-block">#i18n{directory.create_entry.label_shown_in_history_comment}</span>
				</label>
			</div>
	   		<div class="checkbox">
				<label for="shown_in_export">
					<input name="shown_in_export" value="1" type="checkbox" <#if entry.shownInExport>checked="checked"</#if>>
					#i18n{directory.create_entry.label_shown_in_export}
					<span class="help-block" >#i18n{directory.create_entry.label_shown_in_export_comment}</span> 
				</label>
			</div>
			<div class="checkbox">
				<label for="shown_in_completeness">
					<input name="shown_in_completeness" value="1" type="checkbox" <#if entry.shownInCompleteness>checked="checked"</#if> >
					#i18n{directory.create_entry.label_shown_in_completeness}
	   				<span class="help-block">#i18n{directory.create_entry.label_shown_in_completeness_comment}</span> 
				</label>
			</div>
			</fieldset>
		</form>
	</div>
</div>

