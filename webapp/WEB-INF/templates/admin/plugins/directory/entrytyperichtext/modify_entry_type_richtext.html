<#include "/admin/plugins/directory/commons.html" />
<div class="row-fluid">
<div class="span8">
<fieldset>
	<legend>
	#i18n{directory.modify_entry.title_field} : '${entry.directory.title}' 
	<span class="label label-info" title="#i18n{directory.create_entry.label_type}">#i18n{${entry.entryType.titleI18nKey}}</span>
		<a class="btn btn-primary btn-small pull-right" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}#list" title="#i18n{directory.manage_directory.button_back} #i18n{directory.modify_directory.manage_entry.title} '${entry.directory.title}'">
			<i class="icon-chevron-left icon-white"></i>
		</a>
	<form class="form-inline pull-right" id="button_advanced_settings" method="post" action="javascript:doDisplayAdvancedSettings(true, 'regular_expression')" style="visibility:hidden;display:none;">
		<button class="btn btn-primary pull-right" type="submit" >
			<i class="icon-plus icon-white" ></i>
			<span class="hidden-phone" >#i18n{directory.manage_directory.button_manage_advanced_parameters}</span>
		</button>
	</form>	
	<form class="form-inline spaced pull-right" id="button_back" method="post" action="javascript:doDisplayAdvancedSettings(false, 'regular_expression')" style="visibility:hidden;display:none;">
		<button class="btn btn-primary pull-right" type="submit" >
			<i class="icon-plus icon-white" ></i>
			<span class="hidden-phone" >#i18n{directory.manage_directory.button_back}</span>
		</button>
	</form>	
	</legend>
	<form class="form-horizontal" action="jsp/admin/plugins/directory/DoModifyEntry.jsp#list" method="post" name="" id=""  >
	<input name="id_entry" value="${entry.idEntry}" type="hidden" />
	<div class="control-group">
	<label class="control-label" for="title">#i18n{directory.create_entry.label_title} * </label>
	   	<div class="controls">
			<input type="text" name="title" id="title" class="input-xlarge" value="${entry.title}"  maxlength="255" />
			<p class="help-block">#i18n{directory.create_entry.label_title_comment}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="help_message">#i18n{directory.create_entry.label_help_message}</label>
	   	<div class="controls">
	     	<textarea  name="help_message"  id="help_message" class="span5" rows="5">${entry.helpMessage}</textarea>
			<p class="help-block">#i18n{directory.create_entry.label_help_message_comment}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="help_message_search">#i18n{directory.create_entry.label_help_message_search} </label>
		 	<div class="controls">
				<textarea  name="help_message_search"  id="help_message_search"  class="span5" rows="5">${entry.helpMessageSearch}</textarea>
				<p class="help-block">##i18n{directory.create_entry.label_help_message_search_comment}</p>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="comment">#i18n{directory.create_entry.label_comment}</label>
	 	<div class="controls">
			<textarea name="comment"  class="span5"" rows="2">${entry.comment}</textarea>
		</div>
	</div>
   <div class="control-group">
	<label class="control-label" for="value">#i18n{directory.create_entry.label_value_default}</label>
		<#list entry.fields as field>
			<div class="controls">
				<textarea rows="2" class="span10" id="value" name="value">${field.value}</textarea>
			</div>
		</#list>
	</div>
	<div class="control-group">
	<label class="control-label" for="mandatory">#i18n{directory.create_entry.label_mandatory} </label>
   	 	<div class="controls">
			<input name="mandatory" value="1" type="checkbox" <#if entry.mandatory>checked="checked"</#if>	 >
		</div>
	</div>
	<div class="form-actions">
  		<button class="btn btn-primary btn-small" type="submit" name="save">
			<i class="icon-ok icon-white"></i>&nbsp;#i18n{directory.modify_entry.button_save}
		</button>
  		<button class="btn btn-primary btn-small" type="submit" name="apply">
			<i class="icon-ok-circle icon-white"></i>&nbsp;#i18n{directory.modify_entry.button_apply}
		</button>
  		<a class="btn btn-small" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}">
			<i class="icon-remove-circle" ></i>
			<span class="hidden-phone" >#i18n{directory.create_entry.button_cancel}</span>
		</a>
	</div>
	<#if regular_expression_list?exists>
	</fieldset>
	<div id="regular_expression">
	<fieldset> 
		<legend>#i18n{directory.create_entry.manage_regular_expression.title}</legend>
		<form class="form-search"  method="post"  action="jsp/admin/plugins/directory/DoInsertVerification.jsp#list">
			<input name="id_field" value="${id_field}" type="hidden" />
			<label for="id_expression">#i18n{directory.create_entry.manage_regular_expression.label_insert}</label>
			<@combo name="id_expression"  items=regular_expression_list default_value=-1 />
			<button class="btn btn-primary" type="submit" >#
				<i class="icon-search icon-white"></i>&nbsp;i18n{directory.create_entry.manage_regular_expression.button_insert}
			</button>
			<p class="help-block" >#i18n{directory.create_entry.manage_regular_expression.label_insert_comment}</p>
		</form>
	</fieldset>
		<@paginationAdmin paginator=paginator combo=1 />
	    <a name="list" id="list"></a>
        <table class="table table-striped table-condensed">
			<tr> 
				<th>#i18n{directory.create_entry.manage_regular_expression.row_title}</th>
				<th>#i18n{directory.create_entry.manage_regular_expression.row_information_message}</th>
				<th>#i18n{directory.create_entry.manage_regular_expression.row_valid_exemple}</th>
				<th>#i18n{directory.create_entry.manage_field.row_actions}</th>
			</tr>
			<#list list as expression>
          	<tr>
            	<td>${expression.title}</td>
	            <td>${expression.informationMessage}</td>
	            <td>${expression.validExemple}</td>
	            <td>
	             	<a class="btn btn-danger btn-mini" href="jsp/admin/plugins/directory/DoRemoveVerification.jsp?id_expression=${expression.idExpression}&id_field=${id_field}#list"  title="#i18n{directory.create_entry.manage_field.title_delete}" >
						<i class="icon-trash icon-white"></i>
					</a>
				</td>
	        </tr>
			</#list> 
        </table>
        <@paginationAdmin paginator=paginator />
    </div>
	</#if>
	</div>
	<div id="advanced_settings" class="span4">
		<fieldset>
			<legend>#i18n{directory.create_directory.label_advancedsettings}</legend>	 	
			<div class="control-group">
			<label class="control-label" for="">&nbsp;</label>
	   		 	<div class="controls">
					<label class="checkbox" for="indexed">
						<input name="indexed" value="1" type="checkbox"  <#if entry.indexed>checked="checked"</#if> >
						#i18n{directory.create_entry.label_indexed}
					</label>
				</div>
			</div>
	   		<div class="control-group">
				<label class="control-label" for="">&nbsp;</label>
	   		 	<div class="controls">
					<label class="checkbox" for="shown_in_advanced_search">
						<input name="shown_in_advanced_search" value="1" type="checkbox"  <#if entry.shownInAdvancedSearch>checked="checked"</#if>>
						#i18n{directory.create_entry.label_shown_in_advanced_search}
					</label>
					<span class="help-text">#i18n{directory.create_entry.label_shown_in_advanced_search_comment}</span>
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="">&nbsp;</label>
					<div class="controls">
				<label class="checkbox" for="indexed_as_title">
					<input name="indexed_as_title" value="1" type="checkbox" <#if entry.indexedAsTitle>checked="checked"</#if> >
					#i18n{directory.create_entry.label_indexed_as_title}
				</label>
				</div>
			</div>
            <div class="control-group">
			<label class="control-label" for="">&nbsp;</label>
				<div class="controls">
					<label class="checkbox" for="indexed_as_summary">
						<input name="indexed_as_summary" value="1" type="checkbox" <#if entry.indexedAsSummary>checked="checked"</#if> >
						#i18n{directory.create_entry.label_indexed_as_summary}
					</label>
				</div>
			</div>
			<div class="control-group">
			<label class="control-label" for="">&nbsp;</label>
				<div class="controls">
					<label class="checkbox" for="shown_in_result_list">
					#i18n{directory.create_entry.label_shown_in_result_list}
						<input name="shown_in_result_list" value="1" type="checkbox" <#if entry.shownInResultList>checked="checked" </#if>>
				</label>
				<span class="help-text">#i18n{directory.create_entry.label_shown_in_result_list_comment}</label> 
				</div>
			</div>
	    	<div class="control-group">
			<label class="control-label" for="">&nbsp;</label>
	   		 	<div class="controls">
					<label class="checkbox" for="shown_in_result_record">
						<input name="shown_in_result_record" value="1" type="checkbox" <#if entry.shownInResultRecord>checked="checked"</#if>>
						#i18n{directory.create_entry.label_shown_in_result_record}
					</label>
					<span class="help-text">#i18n{directory.create_entry.label_shown_in_result_record_comment}</label> 
				</div>
			</div>
			<div class="control-group">
			<label class="control-label" for="">&nbsp;</label>
				<div class="controls">
					<label class="checkbox" for="shown_in_history">
						<input name="shown_in_history" value="1" type="checkbox" <#if entry.shownInHistory>checked="checked"</#if> > 
						#i18n{directory.create_entry.label_shown_in_history}
					</label>
					<span class="help-text">#i18n{directory.create_entry.label_shown_in_history_comment}</span>
				</div>
			</div>
	   		<div class="control-group">
			<label class="control-label" for="">&nbsp;</label>
	    		<div class="controls">
					<label class="checkbox" for="shown_in_export">
						<input name="shown_in_export" value="1" type="checkbox" <#if entry.shownInExport>checked="checked"</#if>>
						#i18n{directory.create_entry.label_shown_in_export}
					</label>
					<span class="help-text" >#i18n{directory.create_entry.label_shown_in_export_comment}</span> 
				</div>
			</div>
			<div class="control-group">
				<label class="control-label" for="">&nbsp;</label>
	   			<div class="controls">
					<label class="checkbox" for="shown_in_completeness">
						<input name="shown_in_completeness" value="1" type="checkbox" <#if entry.shownInCompleteness>checked="checked"</#if> >
						#i18n{directory.create_entry.label_shown_in_completeness}
					</label>
	   				<span class="help-text">#i18n{directory.create_entry.label_shown_in_completeness_comment}</span> 
				</div>
			</div>
			</fieldset>
		</form>
	</div>
</div>

