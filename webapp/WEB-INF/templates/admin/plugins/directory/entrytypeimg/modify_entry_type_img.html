<#include "/admin/plugins/directory/commons.html" />
<div class="row-fluid">
	<form class="" action="jsp/admin/plugins/directory/DoCreateEntry.jsp#list" method="post" name="" id="" >
		<div class="span7 form-horizontal">
			<fieldset>
				<legend>
					#i18n{directory.modify_entry.title_field} : '${entry.directory.title}' 
					<span class="label label-info" title="#i18n{directory.create_entry.label_type}">#i18n{${entry.entryType.titleI18nKey}}</span>
						<a class="btn btn-primary btn-small pull-right" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}#list" title="#i18n{directory.manage_directory.button_back} #i18n{directory.modify_directory.manage_entry.title} '${entry.directory.title}'">
							<i class="icon-chevron-left icon-white"></i>
						</a>
		<!-- 			<form class="form-inline pull-right" id="button_advanced_settings" method="post" action="javascript:doDisplayAdvancedSettings(true, 'regular_expression')" style="visibility:hidden;display:none;"> -->
		<!-- 				<button class="btn btn-primary pull-right" type="submit" > -->
		<!-- 					<i class="icon-plus icon-white" ></i> -->
		<!-- 					<span class="hidden-phone" >#i18n{directory.manage_directory.button_manage_advanced_parameters}</span> -->
		<!-- 				</button> -->
		<!-- 			</form>	 -->
		<!-- 			<form class="form-inline spaced pull-right" id="button_back" method="post" action="javascript:doDisplayAdvancedSettings(false, 'regular_expression')" style="visibility:hidden;display:none;"> -->
		<!-- 				<button class="btn btn-primary pull-right" type="submit" > -->
		<!-- 					<i class="icon-plus icon-white" ></i> -->
		<!-- 					<span class="hidden-phone" >#i18n{directory.manage_directory.button_back}</span> -->
		<!-- 				</button> -->
		<!-- 			</form> -->
				</legend>
				<input name="id_type" value="${entry.entryType.idType}" type="hidden" />
				<div class="control-group">
				<label class="control-label" for="title">#i18n{directory.create_entry.label_title} * </label>
				   	<div class="controls">
						<input type="text" name="title" id="title" class="input-xlarge" value="${entry.title}"  maxlength="255" />
						<p class="help-block">#i18n{directory.create_entry.label_title_comment}</p>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="help_message">#i18n{directory.create_entry.label_help_message}</label>
					<div class="controls">
						<textarea  name="help_message" id="help_message" class="span5" rows="5">${entry.helpMessage}</textarea>
						<p class="help-block">#i18n{directory.create_entry.label_help_message_comment}</p>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="comment">#i18n{directory.create_entry.label_comment}</label>
					<div class="controls">
						<textarea name="comment" class="span5" rows="2">${entry.comment}</textarea>
					</div>
				</div>	
				<div class="control-group">
					<label class="control-label" for="mandatory">#i18n{directory.create_entry.label_mandatory} </label>
			   	 	<div class="controls">
						<input name="mandatory" value="1" type="checkbox" <#if entry.mandatory>checked="checked"</#if> >
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="width">#i18n{directory.create_entry.label_width} * </label>
				    <div class="controls">
						<#list entry.fields as field>
							<#if !field.title??>
					    			<input type="text" name="width" id="width" class="input-mini" value="${field.width}" />
								<#assign id_field=field.idField>
					    		<#break>
					    	</#if> 
					    </#list>	
					</div>
				</div>
				<div class="control-group">
					<label for="file_max_size" class="control-label">#i18n{directory.create_entry.label_file_max_size} *</label>
						<div class="controls">
							<input type="text" value="${getFileMaxSize(entry)}" class="input-small" id="file_max_size" name="file_max_size">
					</div>
				</div>
				<div class="control-group">
					<label for="max_files" class="control-label">#i18n{directory.create_entry.label_max_files} * </label>
						<div class="controls">
							<input type="text" maxlength="2" value="${getMaxFiles(entry)}" class="span1" name="max_files">
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="display_width">#i18n{directory.create_entry.label_width_display}</label>
					<div class="controls">
						<input type="text" name="display_width" id="display_width" class="span1 inline" value="<#if entry.displayWidth!=-1>${entry.displayWidth}</#if>" />
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="display_height">#i18n{directory.create_entry.label_height_display}</label>
					<div class="controls">
						<input type="text" name="display_height" id="display_height" class="span1 inline" value="<#if entry.displayHeight!=-1>${entry.displayHeight}</#if>" />
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" >#i18n{directory.create_entry.label_image_full_size} </label>
			    	<div class="controls">
						<label class="checkbox" > 
							<input name="image_shown_in_result_list" value="1" type="checkbox" <#if image_field?? && image_field.isShownInResultList()>checked="checked"</#if>>
							#i18n{directory.create_entry.label_shown_in_result_list}
						</label>
						<label class="checkbox" for="image_shown_in_result_record">
							<input name="image_shown_in_result_record" value="1" type="checkbox" <#if image_field?? && image_field.isShownInResultRecord()>checked="checked"</#if> >
							#i18n{directory.create_entry.label_shown_in_result_record}
						</label>
					</div>
				</div>  
			   	<div class="control-group">
					<label class="control-label" for="create_thumbnail">#i18n{directory.create_entry.label_thumbnail}</label>
			   		 <div class="controls">
						<input name="create_thumbnail" id="create_thumbnail" value="1" type="checkbox" <#if has_thumbnail??>checked="checked"</#if>>
						<span class="help-block">#i18n{directory.create_entry.label_thumbnail_comment}</span>
					</div>
				</div>
				<div id="thumbnail" class="well">
					<div class="control-group">
			   			<div class="controls">
							<h3>#i18n{directory.create_entry.label_thumbnail}</h3>
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="thbnail_shown_in_result_list">#i18n{directory.create_entry.label_shown_in_result_list}</label>
						<div class="controls">
							<input name="thbnail_shown_in_result_list" id="thbnail_shown_in_result_list" value="1" type="checkbox" <#if thumbnail_field?? && thumbnail_field.isShownInResultList()>checked="checked"</#if> />
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="thbnail_shown_in_result_record">#i18n{directory.create_entry.label_shown_in_result_record}</label>
						<div class="controls">
							<input name="thbnail_shown_in_result_record" id="thbnail_shown_in_result_record" value="1" type="checkbox" <#if thumbnail_field?? && thumbnail_field.isShownInResultRecord()>checked="checked"</#if> >
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="thumbnail_width"> #i18n{directory.create_entry.label_thumbnail_width} (*)</label>
						<div class="controls">
							<input type="text" name="thumbnail_width" id="thumbnail_width" class="input-mini" value="<#if thumbnail_field?? & thumbnail_field.width?? >${thumbnail_field.width}</#if>" >
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="thumbnail_height">#i18n{directory.create_entry.label_thumbnail_height}(*)</label>
			   			<div class="controls">
							<input type="text" name="thumbnail_height" id="thumbnail_height" class="input-mini" value="<#if thumbnail_field?? & thumbnail_field.height??>${thumbnail_field.height}</#if>" >
						</div>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="create_big_thumbnail">#i18n{directory.create_entry.label_big_thumbnail}</label>
			  		 <div class="controls">
						<input name="create_big_thumbnail" id="create_big_thumbnail" value="1" type="checkbox" <#if has_big_thumbnail??>checked="checked"</#if>>
						<p class="help-block" >#i18n{directory.create_entry.label_big_thumbnail_comment}</p>
					</div>
				</div>
				<div id="thumbnail_big" class="well">
					<div class="control-group">
			   			<div class="controls">
							<h3>#i18n{directory.create_entry.label_big_thumbnail}</h3>
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="big_thbnail_shown_in_result_list">#i18n{directory.create_entry.label_shown_in_result_list}</label>
			   			<div class="controls">
							<input name="big_thbnail_shown_in_result_list" value="1" type="checkbox" <#if big_thumbnail_field?? && big_thumbnail_field.isShownInResultList()>checked="checked"</#if>  >
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="big_thbnail_shown_in_result_record">#i18n{directory.create_entry.label_shown_in_result_record}</label>
			   			<div class="controls">
							<input name="big_thbnail_shown_in_result_record" value="1" type="checkbox" <#if big_thumbnail_field?? && big_thumbnail_field.isShownInResultRecord()>checked="checked"</#if> >
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="thumbnail_big_width"> #i18n{directory.create_entry.label_thumbnail_width} (*)</label>
						<div class="controls">
							<input type="text" name="thumbnail_big_width" id="thumbnail_big_width" class="input-mini" value="<#if big_thumbnail_field?? & big_thumbnail_field.width??>${big_thumbnail_field.width}</#if>" />
						</div>
					</div>
					<div class="control-group">
			   			<label class="control-label" for="thumbnail_big_height">#i18n{directory.create_entry.label_thumbnail_height} (*) : </label>
			   			<div class="controls">
							<input type="text" name="thumbnail_big_height" id="thumbnail_big_height" class="input-mini" value="<#if big_thumbnail_field?? & big_thumbnail_field.height??>${big_thumbnail_field.height}</#if>" />
						</div>
					</div>
				</div>
				<div class="form-actions">
			  		<button class="btn btn-primary btn-small" type="submit" name="save">
						<i class="icon-ok icon-white"></i>&nbsp;#i18n{directory.modify_entry.button_save}
					</button>
			  		<button class="btn btn-primary btn-small" type="submit" name="apply">
						<i class="icon-ok-circle icon-white"></i>&nbsp;#i18n{directory.modify_entry.button_apply}
					</button>
			  		<a class="btn btn-small" href="jsp/admin/plugins/directory/ModifyDirectory.jsp?id_directory=${entry.directory.idDirectory}">
						<i class="icon-remove-circle" ></i>
						<span class="hidden-phone" >#i18n{directory.create_entry.button_cancel}</span>
					</a>
				</div>
			</fieldset>
		</div>
		<div id="advanced_settings" class="span5">
			<fieldset>
				<legend>#i18n{directory.create_directory.label_advancedsettings}</legend>	 	
				<div class="control-group">
				<label class="control-label" for="">&nbsp;</label>
					<div class="controls">
						<label class="checkbox" for="shown_in_result_list">
						#i18n{directory.create_entry.label_shown_in_result_list}
							<input name="shown_in_result_list" value="1" type="checkbox" <#if entry.shownInResultList>checked="checked" </#if>>
					</label>
					<span class="help-block">#i18n{directory.create_entry.label_shown_in_result_list_comment}</span> 
					</div>
				</div>
		    	<div class="control-group">
				<label class="control-label" for="">&nbsp;</label>
		   		 	<div class="controls">
						<label class="checkbox" for="shown_in_result_record">
							<input name="shown_in_result_record" value="1" type="checkbox" <#if entry.shownInResultRecord>checked="checked"</#if>>
							#i18n{directory.create_entry.label_shown_in_result_record}
						</label>
						<span class="help-block">#i18n{directory.create_entry.label_shown_in_result_record_comment}</span> 
					</div>
				</div>
				<div class="control-group">
				<label class="control-label" for="">&nbsp;</label>
					<div class="controls">
						<label class="checkbox" for="shown_in_history">
							<input name="shown_in_history" value="1" type="checkbox" <#if entry.shownInHistory>checked="checked"</#if> > 
							#i18n{directory.create_entry.label_shown_in_history}
						</label>
						<span class="help-block">#i18n{directory.create_entry.label_shown_in_history_comment}</span>
					</div>
				</div>
		   		<div class="control-group">
				<label class="control-label" for="">&nbsp;</label>
		    		<div class="controls">
						<label class="checkbox" for="shown_in_export">
							<input name="shown_in_export" value="1" type="checkbox" <#if entry.shownInExport>checked="checked"</#if>>
							#i18n{directory.create_entry.label_shown_in_export}
						</label>
						<span class="help-block" >#i18n{directory.create_entry.label_shown_in_export_comment}</span> 
					</div>
				</div>
				<div class="control-group">
					<label class="control-label" for="">&nbsp;</label>
		   			<div class="controls">
						<label class="checkbox" for="shown_in_completeness">
							<input name="shown_in_completeness" value="1" type="checkbox" <#if entry.shownInCompleteness>checked="checked"</#if> >
							#i18n{directory.create_entry.label_shown_in_completeness}
						</label>
		   				<span class="help-block">#i18n{directory.create_entry.label_shown_in_completeness_comment}</span> 
					</div>
				</div>
			</fieldset>
		</div>
	</form>
	<#if regular_expression_list?exists>
		<#if entry.fields?? && entry.fields[0]??>
			<#assign id_field=entry.fields[0].idField>
		</#if>
		<div id="regular_expression" class="span11">
			<fieldset> 
				<legend>#i18n{directory.create_entry.manage_regular_expression.title}</legend>
				<form class="form-search"  method="post"  action="jsp/admin/plugins/directory/DoInsertVerification.jsp#list">
					<input name="id_field" value="${id_field}" type="hidden" />
					<label for="id_expression">#i18n{directory.create_entry.manage_regular_expression.label_insert}</label>
					<@combo name="id_expression"  items=regular_expression_list default_value=-1 />
					<button class="btn btn-primary" type="submit" >
						<i class="icon-search icon-white"></i>&nbsp;#i18n{directory.create_entry.manage_regular_expression.button_insert}
					</button>
					<p class="help-block" >#i18n{directory.create_entry.manage_regular_expression.label_insert_comment}</p>
				</form>
			</fieldset>
			<@paginationAdmin paginator=paginator combo=1 />
		    <a name="list" id="list"></a>
	        <table class="table table-striped table-condensed">
				<tr> 
					<th>#i18n{directory.create_entry.manage_regular_expression.row_title}</th>
					<th>#i18n{directory.create_entry.manage_regular_expression.row_information_message}</th>
					<th>#i18n{directory.create_entry.manage_regular_expression.row_valid_exemple}</th>
					<th>#i18n{directory.create_entry.manage_field.row_actions}</th>
				</tr>
				<#list list as expression>
	          	<tr>
	            	<td>${expression.title}</td>
		            <td>${expression.informationMessage}</td>
		            <td>${expression.validExemple}</td>
		            <td>
		             	<a class="btn btn-danger btn-mini" href="jsp/admin/plugins/directory/DoRemoveVerification.jsp?id_expression=${expression.idExpression}&id_field=${id_field}#list"  title="#i18n{directory.create_entry.manage_field.title_delete}" >
							<i class="icon-trash icon-white">&nbsp;</i>
						</a>
					</td>
		        </tr>
				</#list> 
	        </table>
	        <@paginationAdmin paginator=paginator />
	    </div>
	</#if>
</div>
<script>
function thumbnail( c, thumb ){
	if( $( c + ":checked").length > 0 ){
		$( thumb ).show();
	} else {
		$( thumb ).hide();
	}
}

$(document).ready( function(){
	thumbnail("#create_thumbnail","#thumbnail");
	$("#create_thumbnail").click( function(){
		thumbnail( "#create_thumbnail","#thumbnail" );
	})
	thumbnail("#create_big_thumbnail","#thumbnail_big");
	$("#create_big_thumbnail").click( function(){
		thumbnail( "#create_big_thumbnail","#thumbnail_big" );
	})
})	
</script>


		   		 
 
