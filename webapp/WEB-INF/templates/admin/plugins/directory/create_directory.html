<#include "/admin/plugins/directory/commons.html" />
<#include "/admin/util/editor/editor.html" />
<div class="row-fluid">
<form action="jsp/admin/plugins/directory/DoCreateDirectory.jsp?plugin_name=directory" method="post" name="" id=""  >
	<div class="span9" id="main">
		<fieldset>
		<legend> #i18n{directory.create_directory.title}
			<a class="btn btn-small pull-right" id="tgAdvancedSettings" href="#">
				<i class="icon-chevron-left"></i>
				<span class="hidden-phone">&nbsp;#i18n{directory.create_directory.label_advancedsettings}</span>
			</a>
		</legend>	   
		<label for="title">#i18n{directory.create_directory.label_title} * </label>
		<input type="text" name="title" id="" size="80" value=""  maxlength="255"/>
		<span class="help-text">#i18n{directory.create_directory.label_title_comment}</span>
		<label for="comment"> #i18n{directory.create_directory.label_description} *</label>
		<textarea name="description" class="span6" rows="2"></textarea>
		<span class="help-text">#i18n{directory.create_directory.label_description_comment}</span>
		<label for="">#i18n{directory.create_directory.label_workgroup}</label>
		<@combo name="workgroup"  items=user_workgroup_list default_value="all" />
		<span class="help-text">#i18n{directory.create_directory.label_workgroup_comment}</span>
		<#if role_list?exists >
			<label for="role">#i18n{directory.create_directory.label_role}</label>
			 <@combo name="role_key" default_value="none" items=role_list />
			<span class="help-text">#i18n{directory.create_directory.label_role}</span>
		</#if>
		<label for="id_form_search_template">#i18n{directory.create_directory.label_form_search_template} * </label>
		<@combo name="id_form_search_template" default_value="" items=form_search_template_list />
		<span class="help-text">#i18n{directory.create_directory.label_form_search_template_comment}</span>
		<label for="id_result_list_template">#i18n{directory.create_directory.label_result_list_template} * </label>
		<@combo name="id_result_list_template" default_value="" items=result_list_template_list />
		<span class="help-text">#i18n{directory.create_directory.label_result_list_template_comment}</span>
		<label for="id_result_record_template">#i18n{directory.create_directory.label_result_record_template} *</label>
		<@combo name="id_result_record_template" default_value="" items=result_record_template_list />
		<span class="help-text">#i18n{directory.create_directory.label_result_record_template_comment}</span>
		<label for="number_record_per_page">#i18n{directory.create_directory.label_number_record_per_page} * </label>
		<input type="text" name="number_record_per_page" id="number_record_per_page" size="5" value="${getName('number_record_per_page',list_param_default_values)}" />
		<span class="help-text"> #i18n{directory.create_directory.label_number_record_per_page_comment}</span>
		<#if workflow_list?exists>
		<label for="id_workflow_list">#i18n{directory.create_directory.label_worflow_list} : </label>
		<@combo name="id_workflow_list" default_value="" items=workflow_list />
		<label for="workflow_state_filter_search">#i18n{directory.create_directory.label_state_search} : </label>
		<input type="radio" name="workflow_state_filter_search" value="1" <#if workflow_state_filter_search_selected="1">checked="checked"</#if>>#i18n{directory.create_directory.label_radio_state_search}
		<input type="radio" name="workflow_state_filter_search" value="2" <#if workflow_state_filter_search_selected="2">checked="checked"</#if>>#i18n{directory.create_directory.label_radio_state_search_complementary}
		<input type="radio" name="workflow_state_filter_search" value="3" <#if workflow_state_filter_search_selected="3">checked="checked"</#if>>#i18n{directory.create_directory.label_radio_state_search_no}
		
		</#if>
		<label for="unavailability_message">#i18n{directory.create_directory.label_unavailability_message} *</label>
		<textarea name="unavailability_message" id="unavailability_message" rows="20" class="richtext" style="width:100%">${getName('unavailability_message',list_param_default_values)}</textarea>
		<span class="help-text">#i18n{directory.create_directory.label_unavailability_message_comment}</span>
		<div class="form-actions">
			<button type="submit" class="btn btn-primary btn-small" name="save" >
				<i class="icon-ok icon-white"></i>&nbsp;#i18n{directory.create_directory.button_save}
			</button>
			<a type="button" class="btn btn-small" href="jsp/admin/plugins/directory/ManageDirectory.jsp" >
				<i class="icon-remove-circle"></i>&nbsp;#i18n{directory.create_directory.button_cancel}
			</a>
		</div>
		</fieldset>
	</div>
	<div class="span3" id="advanced_settings">	
		<fieldset>
		<legend>#i18n{directory.create_directory.label_advancedsettings}
			<a class="btn btn-small pull-right" id="tgAdvancedSettingsBack" href="#">
				<i class="icon-chevron-right"></i>
			</a>
		</legend>
		<label for="front_office_title">#i18n{directory.create_directory.label_title_front} : </label>
		<input type="text" name="front_office_title" id="" class="input-large" value=""  maxlength="255"/>
		<p class="help-block">#i18n{directory.create_directory.label_title_front_comment}</p>
			<div class="well well-small">
				<p><strong>#i18n{directory.create_directory.label_show_date_creation}</strong></p>
				<label class="checkbox" for="date_shown_in_result_list">
				<input name="date_shown_in_result_list" id="date_shown_in_result_list" value="1" type="checkbox" ${getChecked('date_shown_in_result_list',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_result_list}
				</label>
				<label class="checkbox" for="date_shown_in_result_record">
					<input name="date_shown_in_result_record" id="date_shown_in_result_record" value="1" type="checkbox" ${getChecked('date_shown_in_result_record',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_result_record}
				</label>
				<label class="checkbox" for="date_shown_in_history">
					<input name="date_shown_in_history" id="date_shown_in_history" value="1" type="checkbox" ${getChecked('date_shown_in_history',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_history}
				</label>	
				<label class="checkbox" for="date_shown_in_export">	
					<input name="date_shown_in_export" id="date_shown_in_export" value="1" type="checkbox" ${getChecked('date_shown_in_export',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_export}
				</label>
				<label class="checkbox" for="indexed">	
					<input id="indexed" name="indexed" value="1" type="checkbox" ${getChecked('date_shown_in_search',list_param_default_values)}/>
					#i18n{directory.create_entry.label_indexed}
				</label>
				<blockquote id="show_multiple_search_fields" <#if getName('date_shown_in_search',list_param_default_values)="0">data="no"</#if>>
					<label class="checkbox" for="show_multiple_search_fields">	
						<input name="date_shown_in_multi_search" id="date_shown_in_multi_search" value="1" type="checkbox" ${getChecked('date_shown_in_multi_search',list_param_default_values)} />
						#i18n{directory.create_entry.label_multiple_search_fields}
					</label>
					<label class="checkbox" for="date_shown_in_advanced_search">	
						<input name="date_shown_in_advanced_search" id="date_shown_in_advanced_search" value="1" type="checkbox" ${getChecked('date_shown_in_advanced_search',list_param_default_values)} />
						#i18n{directory.create_entry.label_shown_in_advanced_search}
					</label>
					</blockquote>
			</div>
			<div class="well well-small">
				<p><strong>#i18n{directory.create_directory.label_show_date_modification}</strong></p>
				<label class="checkbox" for="date_modification_shown_in_result_list">
					<input name="date_modification_shown_in_result_list" id="date_modification_shown_in_result_list" value="1" type="checkbox" ${getChecked('date_modification_shown_in_result_list',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_result_list}
				</label>
				<label class="checkbox" for="date_modification_shown_in_result_record">	
					<input name="date_modification_shown_in_result_record" id="date_modification_shown_in_result_record" value="1" type="checkbox" ${getChecked('date_modification_shown_in_result_record',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_result_record}
				</label>
				<label class="checkbox" for="date_modification_shown_in_history">	
					<input name="date_modification_shown_in_history" id="date_modification_shown_in_history" value="1" type="checkbox" ${getChecked('date_modification_shown_in_history',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_history}
				</label>
				<label class="checkbox" for="date_modification_shown_in_export">	
					<input name="date_modification_shown_in_export" id="date_modification_shown_in_export" value="1" type="checkbox" ${getChecked('date_modification_shown_in_export',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_export}
				</label>
				<label class="checkbox" for="date_modification_indexed">	
					<input id="date_modification_indexed" name="date_modification_indexed" value="1" type="checkbox" onclick="doDisplayDateModificationMultipleSearchFields();" ${getChecked('date_modification_shown_in_search',list_param_default_values)}/>
					#i18n{directory.create_entry.label_indexed}
				</label>
				<blockquote id="date_modification_show_multiple_search_fields" <#if getName('date_modification_shown_in_search',list_param_default_values)="0">data="no"</#if>>
					<label class="checkbox" for="date_modification_shown_in_multi_search">
					<input name="date_modification_shown_in_multi_search" id="date_modification_shown_in_multi_search" value="1" type="checkbox" ${getChecked('date_modification_shown_in_multi_search',list_param_default_values)} />
					#i18n{directory.create_entry.label_multiple_search_fields}
					</label>
					<label class="checkbox" for="date_modification_shown_in_advanced_search">
					<input name="date_modification_shown_in_advanced_search" id="date_modification_shown_in_advanced_search" value="1" type="checkbox" ${getChecked('date_modification_shown_in_advanced_search',list_param_default_values)} />
					#i18n{directory.create_entry.label_shown_in_advanced_search}
					</label>
				</blockquote>
			</div>
			<label class="checkbox" for="activate_directory_record">
				<input name="activate_directory_record" id="activate_directory_record" value="1" type="checkbox" ${getChecked('activate_directory_record',list_param_default_values)} />
				#i18n{directory.create_directory_record.activate_directory_record}
			</label>
			<p class="help-block"> #i18n{directory.create_directory_record.activate_directory_record_comment}</p>
			<label class="checkbox" for="is_indexed">#i18n{directory.create_directory.label.is_indexed}
				<input name="is_indexed" id="is_indexed" value="1" type="checkbox" ${getChecked('is_indexed',list_param_default_values)} />
			</label>
			<p class="help-block"> #i18n{directory.create_directory.label.is_indexed_comment}</p>
			<!-- Not useful anymore ? 
			<div class="alert alert-danger">#i18n{directory.message.warning.directory_advanced_parameters_save}</div>
			-->
		</fieldset>
	</div>
	</form>
</div>
<script>
$(document).ready(function() {
	doDisplayAdvancedSettings();
	if( $("#show_multiple_search_fields").attr("data")=="no"){
		$("#show_multiple_search_fields").hide();
	}
	if( $("#date_modification_show_multiple_search_fields").attr("data")=="no"){
		$("#date_modification_show_multiple_search_fields").hide();
		
	}
	
	$("#tgAdvancedSettings").click(function () { 
		$(this).toggle();
		doDisplayAdvancedSettings();
		return false;
    });
	
	$("#tgAdvancedSettingsBack").click(function () { 
		doDisplayAdvancedSettings();
		$("#tgAdvancedSettings").toggle();
		return false;
    });
	
	$("#indexed").click(function(){ 
		$("#show_multiple_search_fields").toggle();
    });
	
	$("#date_modification_indexed").click(function(){ 
		$("#date_modification_show_multiple_search_fields").toggle();
    });
});

function doDisplayAdvancedSettings(){
	$("#advanced_settings").toggle();
	$("#main").toggleClass("span12").toggleClass("span9");
}

</script>
<@initEditor />


