<#include "/admin/plugins/directory/commons.html" />
<#include "/admin/util/editor/editor.html" />
<script type="text/javascript">
	function doDisplayDirectoryAdvancedSettings(isChecked)
	{
		if (isChecked)
		{
			displayId('advanced_settings');			
			hideId('settings');
			displayId('button_back');
			hideId('button_advanced_settings');
		}
		else
		{
			hideId('advanced_settings');
			displayId('settings');			
			hideId('button_back');
			displayId('button_advanced_settings');		
	
			//for ie6
		    if(typeof(xinha_editors.unavailability_message) != 'undefined')
		    {			    
				xinha_editors.unavailability_message.sizeEditor( );
		    }
		}
		
	}
	function doDisplayMultipleSearchFields()
	{
		if(document.getElementById('indexed').checked)
		{
			displayId('show_multiple_search_fields');
		} 
		else 
		{
			hideId('show_multiple_search_fields');			
		}
	}
	window.onload = function() 
	{
		doDisplayDirectoryAdvancedSettings( false );
	}
		
</script>
<div id="content-box-actions">	
	  	<form id="button_advanced_settings" method="post" action="javascript:doDisplayDirectoryAdvancedSettings(true)" style="visibility:hidden;display:none;">
			<input type="submit" value="#i18n{directory.manage_directory.button_manage_advanced_parameters}" class="button bt-toolbar" />
	  	</form>	
	  	<form id="button_back" method="post" action="javascript:doDisplayDirectoryAdvancedSettings(false)" style="visibility:hidden;display:none;">
			<input type="submit" value="#i18n{directory.manage_directory.button_back}" class="button bt-toolbar" />
	  	</form>	
</div>
<form action="jsp/admin/plugins/directory/DoCreateDirectory.jsp?plugin_name=directory" method="post" name="" id=""  >
	  <div id="settings" class="content-box">
	  	   <h2> #i18n{directory.create_directory.title}</h2>	   
		   <div>
			   <p>
			    <label for="title">#i18n{directory.create_directory.label_title} * : </label>
			    <input type="text" name="title" id="" size="80" value=""  maxlength="255"/>
				 <br/>
				<label>&nbsp;</label>#i18n{directory.create_directory.label_title_comment}
			   </p>
			   <p>
			     <label for="comment"> #i18n{directory.create_directory.label_description} * : </label>
			     <textarea name="description" cols="80" rows="2"></textarea>
			   <br/>
			    <label>&nbsp;</label>
				#i18n{directory.create_directory.label_description_comment}
			   </p>
			   	<p>
				    <label for="">#i18n{directory.create_directory.label_workgroup}  : </label>
				     <@combo name="workgroup"  items=user_workgroup_list default_value="all" />
					 <br/>
					<label>&nbsp;</label>
					#i18n{directory.create_directory.label_workgroup_comment}
			   	</p>
			   <#if role_list?exists >
				   	<p>
				    	<label for="role">#i18n{directory.create_directory.label_role} : </label>
			        		 <@combo name="role_key" default_value="none" items=role_list />
						 <br/>
					  	<label>&nbsp;</label>
					#i18n{directory.create_directory.label_role}
					</p>
				</#if>
				<p>
			    	<label for="id_form_search_template">#i18n{directory.create_directory.label_form_search_template} * : </label>
		        		 <@combo name="id_form_search_template" default_value="" items=form_search_template_list />
					 <br/>
				  	<label>&nbsp;</label>
				#i18n{directory.create_directory.label_form_search_template_comment}
				</p>
				<p>
			    	<label for="id_result_list_template">#i18n{directory.create_directory.label_result_list_template} * : </label>
		        		 <@combo name="id_result_list_template" default_value="" items=result_list_template_list />
					 <br/>
				  	<label>&nbsp;</label>
				#i18n{directory.create_directory.label_result_list_template_comment}
				</p>
				<p>
			    	<label for="id_result_record_template">#i18n{directory.create_directory.label_result_record_template} * : </label>
		        		 <@combo name="id_result_record_template" default_value="" items=result_record_template_list />
					 <br/>
				  	<label>&nbsp;</label>
				#i18n{directory.create_directory.label_result_record_template_comment}
				</p>
				<p>
	    			<label for="number_record_per_page">#i18n{directory.create_directory.label_number_record_per_page} * : </label>
	   				 <input type="text" name="number_record_per_page" id="number_record_per_page" size="5" value="${getName('number_record_per_page',list_param_default_values)}" />
	   					<br/>
		 			<label>&nbsp;</label> #i18n{directory.create_directory.label_number_record_per_page_comment}
				 </p>
				 <#if workflow_list?exists>
				 <p>
				 	<label for="id_workflow_list">#i18n{directory.create_directory.label_worflow_list} : </label>
		        		 <@combo name="id_workflow_list" default_value="" items=workflow_list />
					 <br/>
				  	<label>&nbsp;</label><br/>
				 </p>
					 <p>
						 <label for="workflow_state_filter_search">#i18n{directory.create_directory.label_state_search} : </label>
						  <input type="radio" name="workflow_state_filter_search" value="1" <#if workflow_state_filter_search_selected="1">checked="checked"</#if>>#i18n{directory.create_directory.label_radio_state_search}
						  <input type="radio" name="workflow_state_filter_search" value="2" <#if workflow_state_filter_search_selected="2">checked="checked"</#if>>#i18n{directory.create_directory.label_radio_state_search_complementary}
						  <input type="radio" name="workflow_state_filter_search" value="3" <#if workflow_state_filter_search_selected="3">checked="checked"</#if>>#i18n{directory.create_directory.label_radio_state_search_no}
						  <br/>
					  	<label>&nbsp;</label><br/>
					 </p>
				 </#if>
				 
				<p>
		   	 		<label for="unavailability_message">#i18n{directory.create_directory.label_unavailability_message} * : </label>
			     	 <div  class="editor" >
			     			<textarea name="unavailability_message" id="unavailability_message" rows="20" cols="90" class="richtext" style="width:100%">${getName('unavailability_message',list_param_default_values)}</textarea>
				 		<br/>
				 	</div>	
			     	<label>&nbsp;</label>
						#i18n{directory.create_directory.label_unavailability_message_comment}   
		  		 </p>
				
		 	</div>
		    <p>
		  		<input type="submit" value="#i18n{directory.create_directory.button_save}" class="button" name="save" />
		  		<input type="submit" value="#i18n{directory.create_directory.button_cancel}" class="button" name="cancel" />
		   	</p>
			<br/>
	</div>
	<div id="advanced_settings"  class="content-box">	
					
					<h2>#i18n{directory.create_directory.label_advancedsettings}</h2>
					
					<p>
						<label for="">#i18n{directory.create_directory.label_show_date_creation} :</label>
						<input name="date_shown_in_result_list" value="1" type="checkbox" ${getChecked('date_shown_in_result_list',list_param_default_values)} />
						#i18n{directory.create_entry.label_shown_in_result_list}
						
						<br />
						<label>&nbsp;</label><input name="date_shown_in_result_record" value="1" type="checkbox" ${getChecked('date_shown_in_result_record',list_param_default_values)} />
						#i18n{directory.create_entry.label_shown_in_result_record}
	   					
	   					<br />
	   					<label>&nbsp;</label><input name="date_shown_in_history" value="1" type="checkbox" ${getChecked('date_shown_in_history',list_param_default_values)} />
	   					#i18n{directory.create_entry.label_shown_in_history}
	   					
	   					<br />
	   					<label>&nbsp;</label><input name="date_shown_in_export" value="1" type="checkbox" ${getChecked('date_shown_in_export',list_param_default_values)} />
	   					#i18n{directory.create_entry.label_shown_in_export}
	   					
	   					<br />
						<label>&nbsp;</label><input id="indexed" name="date_shown_in_search" value="1" type="checkbox" onclick="doDisplayMultipleSearchFields();" ${getChecked('date_shown_in_search',list_param_default_values)}/>
						#i18n{directory.create_entry.label_indexed}
						
						<br />
						<span id="show_multiple_search_fields" <#if getName('date_shown_in_search',list_param_default_values)="0">style="visibility:hidden;display:none;"</#if>>
							<label>&nbsp;</label><input name="date_shown_in_multi_search" value="1" type="checkbox" ${getChecked('date_shown_in_multi_search',list_param_default_values)} />
							#i18n{directory.create_entry.label_multiple_search_fields}
													
							<input name="date_shown_in_advanced_search" value="1" type="checkbox" ${getChecked('date_shown_in_advanced_search',list_param_default_values)} />
							#i18n{directory.create_entry.label_shown_in_advanced_search}
						</span>
					</p>
					<p>
					    <label for="activate_directory_record">#i18n{directory.create_directory_record.activate_directory_record} : </label>
					    <input name="activate_directory_record" value="1" type="checkbox" ${getChecked('activate_directory_record',list_param_default_values)} />
				   		<br/>
					    <label>&nbsp;</label> #i18n{directory.create_directory_record.activate_directory_record_comment}
					</p>
					<p>
						<label for="is_indexed">#i18n{directory.create_directory.label.is_indexed} :</label>
						<input name="is_indexed" value="1" type="checkbox" ${getChecked('is_indexed',list_param_default_values)} />
						<br/>
					    <label>&nbsp;</label> #i18n{directory.create_directory.label.is_indexed_comment}
					</p>
					<br />
					<p>
						<label>&nbsp;</label>
						<span class="alert">
							 #i18n{directory.message.warning.directory_advanced_parameters_save}
						</span>
					</p>
				 	<br />
	</div>
</form>
<@initEditor />
 <@getDatePicker idField="date_limite" language=locale />

